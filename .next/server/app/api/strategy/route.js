"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/strategy/route";
exports.ids = ["app/api/strategy/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "playwright":
/*!*****************************!*\
  !*** external "playwright" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("playwright");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstrategy%2Froute&page=%2Fapi%2Fstrategy%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstrategy%2Froute.ts&appDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstrategy%2Froute&page=%2Fapi%2Fstrategy%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstrategy%2Froute.ts&appDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_piotrostiak_Dev_ai_grid_lite_src_app_api_strategy_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/strategy/route.ts */ \"(rsc)/./src/app/api/strategy/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_piotrostiak_Dev_ai_grid_lite_src_app_api_strategy_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_piotrostiak_Dev_ai_grid_lite_src_app_api_strategy_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/strategy/route\",\n        pathname: \"/api/strategy\",\n        filename: \"route\",\n        bundlePath: \"app/api/strategy/route\"\n    },\n    resolvedPagePath: \"/Users/piotrostiak/Dev/ai/grid-lite/src/app/api/strategy/route.ts\",\n    nextConfigOutput,\n    userland: _Users_piotrostiak_Dev_ai_grid_lite_src_app_api_strategy_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/strategy/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdHJhdGVneSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3RyYXRlZ3klMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdHJhdGVneSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBpb3Ryb3N0aWFrJTJGRGV2JTJGYWklMkZncmlkLWxpdGUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcGlvdHJvc3RpYWslMkZEZXYlMkZhaSUyRmdyaWQtbGl0ZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUI7QUFDOUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmlkbGl0ZS8/NTQ3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcGlvdHJvc3RpYWsvRGV2L2FpL2dyaWQtbGl0ZS9zcmMvYXBwL2FwaS9zdHJhdGVneS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3RyYXRlZ3kvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdHJhdGVneVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3RyYXRlZ3kvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcGlvdHJvc3RpYWsvRGV2L2FpL2dyaWQtbGl0ZS9zcmMvYXBwL2FwaS9zdHJhdGVneS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3RyYXRlZ3kvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstrategy%2Froute&page=%2Fapi%2Fstrategy%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstrategy%2Froute.ts&appDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/scan/lib/browser.ts":
/*!*****************************************!*\
  !*** ./src/app/api/scan/lib/browser.ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   captureScreenshot: () => (/* binding */ captureScreenshot),\n/* harmony export */   closeBrowser: () => (/* binding */ closeBrowser),\n/* harmony export */   createBrowserSession: () => (/* binding */ createBrowserSession)\n/* harmony export */ });\n/* harmony import */ var playwright__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! playwright */ \"playwright\");\n/* harmony import */ var _ghostery_adblocker_playwright__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ghostery/adblocker-playwright */ \"(rsc)/./node_modules/@ghostery/adblocker-playwright/dist/esm/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([playwright__WEBPACK_IMPORTED_MODULE_0__]);\nplaywright__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst USER_AGENT = \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36\";\n/**\n * Launches a browser and navigates to the specified URL with ad blocking enabled.\n */ async function createBrowserSession(url) {\n    const browser = await playwright__WEBPACK_IMPORTED_MODULE_0__.chromium.launch({\n        headless: true,\n        args: [\n            \"--no-sandbox\",\n            \"--disable-setuid-sandbox\"\n        ]\n    });\n    const context = await browser.newContext({\n        userAgent: USER_AGENT,\n        viewport: {\n            width: 1920,\n            height: 1080\n        },\n        permissions: [\n            \"geolocation\"\n        ],\n        ignoreHTTPSErrors: true,\n        javaScriptEnabled: true,\n        locale: \"en-US\"\n    });\n    const page = await context.newPage();\n    // Setup Ghostery adblocker - blocks trackers and cookie popups\n    const blocker = await _ghostery_adblocker_playwright__WEBPACK_IMPORTED_MODULE_1__.PlaywrightBlocker.fromPrebuiltAdsAndTracking();\n    await blocker.enableBlockingInPage(page);\n    // Navigate to the URL with domcontentloaded for faster results\n    await page.goto(url, {\n        waitUntil: \"domcontentloaded\",\n        timeout: 60000\n    });\n    // Wait for dynamic content and hydration\n    await page.waitForTimeout(2000);\n    return {\n        browser,\n        page\n    };\n}\n/**\n * Takes a screenshot of the current page viewport.\n */ async function captureScreenshot(page) {\n    return page.screenshot({\n        type: \"png\",\n        fullPage: false\n    });\n}\n/**\n * Safely closes the browser instance.\n */ async function closeBrowser(browser) {\n    if (browser) {\n        try {\n            await browser.close();\n        } catch  {\n        // Ignore close errors\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zY2FuL2xpYi9icm93c2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ2M7QUFFbkUsTUFBTUUsYUFDRjtBQU9KOztDQUVDLEdBQ00sZUFBZUMscUJBQ2xCQyxHQUFXO0lBRVgsTUFBTUMsVUFBVSxNQUFNTCxnREFBUUEsQ0FBQ00sTUFBTSxDQUFDO1FBQ2xDQyxVQUFVO1FBQ1ZDLE1BQU07WUFBQztZQUFnQjtTQUEyQjtJQUN0RDtJQUVBLE1BQU1DLFVBQVUsTUFBTUosUUFBUUssVUFBVSxDQUFDO1FBQ3JDQyxXQUFXVDtRQUNYVSxVQUFVO1lBQUVDLE9BQU87WUFBTUMsUUFBUTtRQUFLO1FBQ3RDQyxhQUFhO1lBQUM7U0FBYztRQUM1QkMsbUJBQW1CO1FBQ25CQyxtQkFBbUI7UUFDbkJDLFFBQVE7SUFDWjtJQUVBLE1BQU1DLE9BQU8sTUFBTVYsUUFBUVcsT0FBTztJQUVsQywrREFBK0Q7SUFDL0QsTUFBTUMsVUFBVSxNQUFNcEIsNkVBQWlCQSxDQUFDcUIsMEJBQTBCO0lBQ2xFLE1BQU1ELFFBQVFFLG9CQUFvQixDQUFDSjtJQUVuQywrREFBK0Q7SUFDL0QsTUFBTUEsS0FBS0ssSUFBSSxDQUFDcEIsS0FBSztRQUNqQnFCLFdBQVc7UUFDWEMsU0FBUztJQUNiO0lBRUEseUNBQXlDO0lBQ3pDLE1BQU1QLEtBQUtRLGNBQWMsQ0FBQztJQUUxQixPQUFPO1FBQUV0QjtRQUFTYztJQUFLO0FBQzNCO0FBRUE7O0NBRUMsR0FDTSxlQUFlUyxrQkFBa0JULElBQVU7SUFDOUMsT0FBT0EsS0FBS1UsVUFBVSxDQUFDO1FBQ25CQyxNQUFNO1FBQ05DLFVBQVU7SUFDZDtBQUNKO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxhQUFhM0IsT0FBdUI7SUFDdEQsSUFBSUEsU0FBUztRQUNULElBQUk7WUFDQSxNQUFNQSxRQUFRNEIsS0FBSztRQUN2QixFQUFFLE9BQU07UUFDSixzQkFBc0I7UUFDMUI7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JpZGxpdGUvLi9zcmMvYXBwL2FwaS9zY2FuL2xpYi9icm93c2VyLnRzP2ZiMmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hyb21pdW0sIEJyb3dzZXIsIFBhZ2UgfSBmcm9tIFwicGxheXdyaWdodFwiO1xuaW1wb3J0IHsgUGxheXdyaWdodEJsb2NrZXIgfSBmcm9tIFwiQGdob3N0ZXJ5L2FkYmxvY2tlci1wbGF5d3JpZ2h0XCI7XG5cbmNvbnN0IFVTRVJfQUdFTlQgPVxuICAgIFwiTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJvd3NlclNlc3Npb24ge1xuICAgIGJyb3dzZXI6IEJyb3dzZXI7XG4gICAgcGFnZTogUGFnZTtcbn1cblxuLyoqXG4gKiBMYXVuY2hlcyBhIGJyb3dzZXIgYW5kIG5hdmlnYXRlcyB0byB0aGUgc3BlY2lmaWVkIFVSTCB3aXRoIGFkIGJsb2NraW5nIGVuYWJsZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVCcm93c2VyU2Vzc2lvbihcbiAgICB1cmw6IHN0cmluZ1xuKTogUHJvbWlzZTxCcm93c2VyU2Vzc2lvbj4ge1xuICAgIGNvbnN0IGJyb3dzZXIgPSBhd2FpdCBjaHJvbWl1bS5sYXVuY2goe1xuICAgICAgICBoZWFkbGVzczogdHJ1ZSxcbiAgICAgICAgYXJnczogW1wiLS1uby1zYW5kYm94XCIsIFwiLS1kaXNhYmxlLXNldHVpZC1zYW5kYm94XCJdLFxuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IGJyb3dzZXIubmV3Q29udGV4dCh7XG4gICAgICAgIHVzZXJBZ2VudDogVVNFUl9BR0VOVCxcbiAgICAgICAgdmlld3BvcnQ6IHsgd2lkdGg6IDE5MjAsIGhlaWdodDogMTA4MCB9LFxuICAgICAgICBwZXJtaXNzaW9uczogW1wiZ2VvbG9jYXRpb25cIl0sXG4gICAgICAgIGlnbm9yZUhUVFBTRXJyb3JzOiB0cnVlLFxuICAgICAgICBqYXZhU2NyaXB0RW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbG9jYWxlOiBcImVuLVVTXCIsXG4gICAgfSk7XG5cbiAgICBjb25zdCBwYWdlID0gYXdhaXQgY29udGV4dC5uZXdQYWdlKCk7XG5cbiAgICAvLyBTZXR1cCBHaG9zdGVyeSBhZGJsb2NrZXIgLSBibG9ja3MgdHJhY2tlcnMgYW5kIGNvb2tpZSBwb3B1cHNcbiAgICBjb25zdCBibG9ja2VyID0gYXdhaXQgUGxheXdyaWdodEJsb2NrZXIuZnJvbVByZWJ1aWx0QWRzQW5kVHJhY2tpbmcoKTtcbiAgICBhd2FpdCBibG9ja2VyLmVuYWJsZUJsb2NraW5nSW5QYWdlKHBhZ2UpO1xuXG4gICAgLy8gTmF2aWdhdGUgdG8gdGhlIFVSTCB3aXRoIGRvbWNvbnRlbnRsb2FkZWQgZm9yIGZhc3RlciByZXN1bHRzXG4gICAgYXdhaXQgcGFnZS5nb3RvKHVybCwge1xuICAgICAgICB3YWl0VW50aWw6IFwiZG9tY29udGVudGxvYWRlZFwiLFxuICAgICAgICB0aW1lb3V0OiA2MDAwMCxcbiAgICB9KTtcblxuICAgIC8vIFdhaXQgZm9yIGR5bmFtaWMgY29udGVudCBhbmQgaHlkcmF0aW9uXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCgyMDAwKTtcblxuICAgIHJldHVybiB7IGJyb3dzZXIsIHBhZ2UgfTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhIHNjcmVlbnNob3Qgb2YgdGhlIGN1cnJlbnQgcGFnZSB2aWV3cG9ydC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhcHR1cmVTY3JlZW5zaG90KHBhZ2U6IFBhZ2UpOiBQcm9taXNlPEJ1ZmZlcj4ge1xuICAgIHJldHVybiBwYWdlLnNjcmVlbnNob3Qoe1xuICAgICAgICB0eXBlOiBcInBuZ1wiLFxuICAgICAgICBmdWxsUGFnZTogZmFsc2UsIC8vIFRvcCB2aWV3cG9ydCBvbmx5IGZvciBiZXR0ZXIgYW5hbHlzaXNcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgY2xvc2VzIHRoZSBicm93c2VyIGluc3RhbmNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VCcm93c2VyKGJyb3dzZXI6IEJyb3dzZXIgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKGJyb3dzZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgY2xvc2UgZXJyb3JzXG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiY2hyb21pdW0iLCJQbGF5d3JpZ2h0QmxvY2tlciIsIlVTRVJfQUdFTlQiLCJjcmVhdGVCcm93c2VyU2Vzc2lvbiIsInVybCIsImJyb3dzZXIiLCJsYXVuY2giLCJoZWFkbGVzcyIsImFyZ3MiLCJjb250ZXh0IiwibmV3Q29udGV4dCIsInVzZXJBZ2VudCIsInZpZXdwb3J0Iiwid2lkdGgiLCJoZWlnaHQiLCJwZXJtaXNzaW9ucyIsImlnbm9yZUhUVFBTRXJyb3JzIiwiamF2YVNjcmlwdEVuYWJsZWQiLCJsb2NhbGUiLCJwYWdlIiwibmV3UGFnZSIsImJsb2NrZXIiLCJmcm9tUHJlYnVpbHRBZHNBbmRUcmFja2luZyIsImVuYWJsZUJsb2NraW5nSW5QYWdlIiwiZ290byIsIndhaXRVbnRpbCIsInRpbWVvdXQiLCJ3YWl0Rm9yVGltZW91dCIsImNhcHR1cmVTY3JlZW5zaG90Iiwic2NyZWVuc2hvdCIsInR5cGUiLCJmdWxsUGFnZSIsImNsb3NlQnJvd3NlciIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/scan/lib/browser.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/scan/lib/text-extractor.ts":
/*!************************************************!*\
  !*** ./src/app/api/scan/lib/text-extractor.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractWebsiteText: () => (/* binding */ extractWebsiteText),\n/* harmony export */   scrapeTextOnly: () => (/* binding */ scrapeTextOnly)\n/* harmony export */ });\n/**\n * Extracts clean text content from a webpage for strategy analysis.\n * Removes non-content elements like scripts, styles, navigation, and footers.\n * Caps output at 15,000 characters to stay within API limits.\n */ async function extractWebsiteText(page) {\n    const rawText = await page.evaluate(()=>{\n        // Clone the body to avoid modifying the actual page\n        const clone = document.body.cloneNode(true);\n        // Remove non-content elements\n        const selectorsToRemove = [\n            \"script\",\n            \"style\",\n            \"noscript\",\n            \"svg\",\n            \"iframe\",\n            \"nav\",\n            \"footer\",\n            \"header\",\n            \"[role='navigation']\",\n            \"[role='banner']\",\n            \"[role='contentinfo']\",\n            \".cookie-banner\",\n            \".cookie-consent\",\n            \"#cookie-banner\",\n            \".nav\",\n            \".navigation\",\n            \".footer\",\n            \".header\",\n            \".sidebar\",\n            \".advertisement\",\n            \".ad\",\n            \".social-share\"\n        ];\n        selectorsToRemove.forEach((selector)=>{\n            clone.querySelectorAll(selector).forEach((el)=>el.remove());\n        });\n        // Get text content and clean up whitespace\n        const text = clone.innerText || clone.textContent || \"\";\n        // Normalize whitespace: collapse multiple newlines/spaces\n        return text.replace(/\\s+/g, \" \").replace(/\\n\\s*\\n/g, \"\\n\").trim();\n    });\n    // Cap at 15,000 characters to stay within reasonable API limits\n    const MAX_LENGTH = 15000;\n    if (rawText.length > MAX_LENGTH) {\n        return rawText.slice(0, MAX_LENGTH) + \"...\";\n    }\n    return rawText;\n}\n/**\n * Lightweight text-only scrape for Dashboard â†’ Strategy flow.\n * Reuses browser session utilities but skips screenshot.\n */ async function scrapeTextOnly(page) {\n    const [text, title] = await Promise.all([\n        extractWebsiteText(page),\n        page.title()\n    ]);\n    return {\n        text,\n        title\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zY2FuL2xpYi90ZXh0LWV4dHJhY3Rvci50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVBOzs7O0NBSUMsR0FDTSxlQUFlQSxtQkFBbUJDLElBQVU7SUFDakQsTUFBTUMsVUFBVSxNQUFNRCxLQUFLRSxRQUFRLENBQUM7UUFDbEMsb0RBQW9EO1FBQ3BELE1BQU1DLFFBQVFDLFNBQVNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1FBRXRDLDhCQUE4QjtRQUM5QixNQUFNQyxvQkFBb0I7WUFDeEI7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUVEQSxrQkFBa0JDLE9BQU8sQ0FBQyxDQUFDQztZQUN6Qk4sTUFBTU8sZ0JBQWdCLENBQUNELFVBQVVELE9BQU8sQ0FBQyxDQUFDRyxLQUFPQSxHQUFHQyxNQUFNO1FBQzVEO1FBRUEsMkNBQTJDO1FBQzNDLE1BQU1DLE9BQU9WLE1BQU1XLFNBQVMsSUFBSVgsTUFBTVksV0FBVyxJQUFJO1FBRXJELDBEQUEwRDtRQUMxRCxPQUFPRixLQUNKRyxPQUFPLENBQUMsUUFBUSxLQUNoQkEsT0FBTyxDQUFDLFlBQVksTUFDcEJDLElBQUk7SUFDVDtJQUVBLGdFQUFnRTtJQUNoRSxNQUFNQyxhQUFhO0lBQ25CLElBQUlqQixRQUFRa0IsTUFBTSxHQUFHRCxZQUFZO1FBQy9CLE9BQU9qQixRQUFRbUIsS0FBSyxDQUFDLEdBQUdGLGNBQWM7SUFDeEM7SUFFQSxPQUFPakI7QUFDVDtBQUVBOzs7Q0FHQyxHQUNNLGVBQWVvQixlQUNwQnJCLElBQVU7SUFFVixNQUFNLENBQUNhLE1BQU1TLE1BQU0sR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDdEN6QixtQkFBbUJDO1FBQ25CQSxLQUFLc0IsS0FBSztLQUNYO0lBRUQsT0FBTztRQUFFVDtRQUFNUztJQUFNO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JpZGxpdGUvLi9zcmMvYXBwL2FwaS9zY2FuL2xpYi90ZXh0LWV4dHJhY3Rvci50cz8xZWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2UgfSBmcm9tIFwicGxheXdyaWdodFwiO1xuXG4vKipcbiAqIEV4dHJhY3RzIGNsZWFuIHRleHQgY29udGVudCBmcm9tIGEgd2VicGFnZSBmb3Igc3RyYXRlZ3kgYW5hbHlzaXMuXG4gKiBSZW1vdmVzIG5vbi1jb250ZW50IGVsZW1lbnRzIGxpa2Ugc2NyaXB0cywgc3R5bGVzLCBuYXZpZ2F0aW9uLCBhbmQgZm9vdGVycy5cbiAqIENhcHMgb3V0cHV0IGF0IDE1LDAwMCBjaGFyYWN0ZXJzIHRvIHN0YXkgd2l0aGluIEFQSSBsaW1pdHMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0V2Vic2l0ZVRleHQocGFnZTogUGFnZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHJhd1RleHQgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcbiAgICAvLyBDbG9uZSB0aGUgYm9keSB0byBhdm9pZCBtb2RpZnlpbmcgdGhlIGFjdHVhbCBwYWdlXG4gICAgY29uc3QgY2xvbmUgPSBkb2N1bWVudC5ib2R5LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIC8vIFJlbW92ZSBub24tY29udGVudCBlbGVtZW50c1xuICAgIGNvbnN0IHNlbGVjdG9yc1RvUmVtb3ZlID0gW1xuICAgICAgXCJzY3JpcHRcIixcbiAgICAgIFwic3R5bGVcIixcbiAgICAgIFwibm9zY3JpcHRcIixcbiAgICAgIFwic3ZnXCIsXG4gICAgICBcImlmcmFtZVwiLFxuICAgICAgXCJuYXZcIixcbiAgICAgIFwiZm9vdGVyXCIsXG4gICAgICBcImhlYWRlclwiLFxuICAgICAgXCJbcm9sZT0nbmF2aWdhdGlvbiddXCIsXG4gICAgICBcIltyb2xlPSdiYW5uZXInXVwiLFxuICAgICAgXCJbcm9sZT0nY29udGVudGluZm8nXVwiLFxuICAgICAgXCIuY29va2llLWJhbm5lclwiLFxuICAgICAgXCIuY29va2llLWNvbnNlbnRcIixcbiAgICAgIFwiI2Nvb2tpZS1iYW5uZXJcIixcbiAgICAgIFwiLm5hdlwiLFxuICAgICAgXCIubmF2aWdhdGlvblwiLFxuICAgICAgXCIuZm9vdGVyXCIsXG4gICAgICBcIi5oZWFkZXJcIixcbiAgICAgIFwiLnNpZGViYXJcIixcbiAgICAgIFwiLmFkdmVydGlzZW1lbnRcIixcbiAgICAgIFwiLmFkXCIsXG4gICAgICBcIi5zb2NpYWwtc2hhcmVcIixcbiAgICBdO1xuXG4gICAgc2VsZWN0b3JzVG9SZW1vdmUuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUoKSk7XG4gICAgfSk7XG5cbiAgICAvLyBHZXQgdGV4dCBjb250ZW50IGFuZCBjbGVhbiB1cCB3aGl0ZXNwYWNlXG4gICAgY29uc3QgdGV4dCA9IGNsb25lLmlubmVyVGV4dCB8fCBjbG9uZS50ZXh0Q29udGVudCB8fCBcIlwiO1xuXG4gICAgLy8gTm9ybWFsaXplIHdoaXRlc3BhY2U6IGNvbGxhcHNlIG11bHRpcGxlIG5ld2xpbmVzL3NwYWNlc1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcbiAgICAgIC5yZXBsYWNlKC9cXG5cXHMqXFxuL2csIFwiXFxuXCIpXG4gICAgICAudHJpbSgpO1xuICB9KTtcblxuICAvLyBDYXAgYXQgMTUsMDAwIGNoYXJhY3RlcnMgdG8gc3RheSB3aXRoaW4gcmVhc29uYWJsZSBBUEkgbGltaXRzXG4gIGNvbnN0IE1BWF9MRU5HVEggPSAxNTAwMDtcbiAgaWYgKHJhd1RleHQubGVuZ3RoID4gTUFYX0xFTkdUSCkge1xuICAgIHJldHVybiByYXdUZXh0LnNsaWNlKDAsIE1BWF9MRU5HVEgpICsgXCIuLi5cIjtcbiAgfVxuXG4gIHJldHVybiByYXdUZXh0O1xufVxuXG4vKipcbiAqIExpZ2h0d2VpZ2h0IHRleHQtb25seSBzY3JhcGUgZm9yIERhc2hib2FyZCDihpIgU3RyYXRlZ3kgZmxvdy5cbiAqIFJldXNlcyBicm93c2VyIHNlc3Npb24gdXRpbGl0aWVzIGJ1dCBza2lwcyBzY3JlZW5zaG90LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2NyYXBlVGV4dE9ubHkoXG4gIHBhZ2U6IFBhZ2Vcbik6IFByb21pc2U8eyB0ZXh0OiBzdHJpbmc7IHRpdGxlOiBzdHJpbmcgfT4ge1xuICBjb25zdCBbdGV4dCwgdGl0bGVdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGV4dHJhY3RXZWJzaXRlVGV4dChwYWdlKSxcbiAgICBwYWdlLnRpdGxlKCksXG4gIF0pO1xuXG4gIHJldHVybiB7IHRleHQsIHRpdGxlIH07XG59XG4iXSwibmFtZXMiOlsiZXh0cmFjdFdlYnNpdGVUZXh0IiwicGFnZSIsInJhd1RleHQiLCJldmFsdWF0ZSIsImNsb25lIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xvbmVOb2RlIiwic2VsZWN0b3JzVG9SZW1vdmUiLCJmb3JFYWNoIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWwiLCJyZW1vdmUiLCJ0ZXh0IiwiaW5uZXJUZXh0IiwidGV4dENvbnRlbnQiLCJyZXBsYWNlIiwidHJpbSIsIk1BWF9MRU5HVEgiLCJsZW5ndGgiLCJzbGljZSIsInNjcmFwZVRleHRPbmx5IiwidGl0bGUiLCJQcm9taXNlIiwiYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/scan/lib/text-extractor.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/scan/lib/url-utils.ts":
/*!*******************************************!*\
  !*** ./src/app/api/scan/lib/url-utils.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseUrl: () => (/* binding */ parseUrl)\n/* harmony export */ });\n/**\n * Validates and normalizes a URL string.\n * Adds https:// if no protocol is present.\n * Returns the normalized URL or null if invalid.\n */ function parseUrl(url) {\n    if (!url || typeof url !== \"string\") {\n        return null;\n    }\n    const normalized = url.startsWith(\"http\") ? url : `https://${url}`;\n    try {\n        new URL(normalized);\n        return normalized;\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zY2FuL2xpYi91cmwtdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7O0NBSUMsR0FDTSxTQUFTQSxTQUFTQyxHQUFZO0lBQ2pDLElBQUksQ0FBQ0EsT0FBTyxPQUFPQSxRQUFRLFVBQVU7UUFDakMsT0FBTztJQUNYO0lBRUEsTUFBTUMsYUFBYUQsSUFBSUUsVUFBVSxDQUFDLFVBQVVGLE1BQU0sQ0FBQyxRQUFRLEVBQUVBLElBQUksQ0FBQztJQUVsRSxJQUFJO1FBQ0EsSUFBSUcsSUFBSUY7UUFDUixPQUFPQTtJQUNYLEVBQUUsT0FBTTtRQUNKLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JpZGxpdGUvLi9zcmMvYXBwL2FwaS9zY2FuL2xpYi91cmwtdXRpbHMudHM/Y2YyNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFZhbGlkYXRlcyBhbmQgbm9ybWFsaXplcyBhIFVSTCBzdHJpbmcuXG4gKiBBZGRzIGh0dHBzOi8vIGlmIG5vIHByb3RvY29sIGlzIHByZXNlbnQuXG4gKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIFVSTCBvciBudWxsIGlmIGludmFsaWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVybCh1cmw6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB1cmwuc3RhcnRzV2l0aChcImh0dHBcIikgPyB1cmwgOiBgaHR0cHM6Ly8ke3VybH1gO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFVSTChub3JtYWxpemVkKTtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG4gICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwYXJzZVVybCIsInVybCIsIm5vcm1hbGl6ZWQiLCJzdGFydHNXaXRoIiwiVVJMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/scan/lib/url-utils.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/strategy/lib/strategist.ts":
/*!************************************************!*\
  !*** ./src/app/api/strategy/lib/strategist.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateChatResponse: () => (/* binding */ generateChatResponse),\n/* harmony export */   generateInitialStrategy: () => (/* binding */ generateInitialStrategy)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\nconst STRATEGIST_SYSTEM_PROMPT = `\n## SARAH - The Strategist\n\n**Role:** You are Sarah, an energetic and insightful Digital Marketing Strategist with 15 years of experience. You've worked with Fortune 500 brands and small businesses alike. You specialize in display advertising campaigns.\n\n**Personality:**\n- Enthusiastic and data-driven, but approachable\n- Use casual language with strategic depth\n- Often start messages with \"Hey!\" or \"Love it!\" or \"Great news!\"\n- Use emojis sparingly but effectively: ðŸŽ¯ ðŸ’¡ ðŸ“Š âœ¨ ðŸš€\n- Be encouraging and confident in your recommendations\n\n**Your Task:**\n1. Analyze the brand profile and campaign data provided\n2. Recommend ONE of three campaign strategies:\n   - AWARENESS: For brands needing visibility and recognition\n   - CONVERSION: For brands with clear offers wanting immediate sales/leads\n   - ENGAGEMENT: For brands wanting to build community and interaction\n\n3. Create a compelling campaign angle based on:\n   - The brand's unique selling points\n   - Any current promotions\n   - Their target audiences\n   - Industry best practices for display ads\n\n**Output Format:**\nReturn a JSON object with the following structure:\n{\n  \"greeting\": \"A personalized opening message (2-3 sentences) that shows you understand their brand and gets them excited\",\n  \"strategy\": {\n    \"recommendation\": \"AWARENESS\" | \"CONVERSION\" | \"ENGAGEMENT\",\n    \"campaignAngle\": \"A catchy 2-4 word theme (e.g., 'Speed and Trust', 'Premium Quality', 'Always Available')\",\n    \"headline\": \"Primary ad headline - punchy, max 8 words\",\n    \"subheadline\": \"Supporting message - max 12 words\",\n    \"rationale\": \"Why this approach works for them (2-3 sentences)\",\n    \"callToAction\": \"Primary CTA button text (2-4 words)\",\n    \"adFormats\": [\"300x250\", \"728x90\", \"160x600\"],\n    \"targetingTips\": [\"Audience targeting tip 1\", \"Audience targeting tip 2\"]\n  }\n}\n\nIMPORTANT: Return ONLY the JSON, no markdown formatting or additional text.\n`;\nconst CHAT_SYSTEM_PROMPT = `\nYou are Sarah, an energetic Digital Marketing Strategist. You're in a conversation with a client about their ad campaign strategy.\n\n**IMPORTANT:** Detect if the user is requesting a STRATEGY CHANGE. Strategy change requests include:\n- Asking for a different campaign angle/theme (e.g., \"focus on urgency instead\", \"let's try a trust angle\")\n- Requesting a different strategy type (e.g., \"I want conversion-focused\", \"let's do engagement\")\n- Asking to change the headline, CTA, or overall approach\n- Expressing they don't like the current strategy and want something different\n\n**If user requests a strategy change:**\nReturn JSON in this format:\n{\n  \"message\": \"Your conversational response explaining the new strategy (2-3 sentences)\",\n  \"updatedStrategy\": {\n    \"recommendation\": \"AWARENESS\" | \"CONVERSION\" | \"ENGAGEMENT\",\n    \"campaignAngle\": \"New 2-4 word theme\",\n    \"headline\": \"New headline - max 8 words\",\n    \"subheadline\": \"New supporting message - max 12 words\",\n    \"rationale\": \"Why this new approach works (2-3 sentences)\",\n    \"callToAction\": \"New CTA text (2-4 words)\",\n    \"adFormats\": [\"300x250\", \"728x90\", \"160x600\"],\n    \"targetingTips\": [\"Tip 1\", \"Tip 2\"]\n  }\n}\n\n**If user is just asking questions or making minor comments (NOT a strategy change):**\nReturn JSON in this format:\n{\n  \"message\": \"Your conversational response (2-4 sentences)\"\n}\n\nUse a casual, friendly tone. Use emojis sparingly (ðŸŽ¯ ðŸ’¡ âœ¨).\nIMPORTANT: Always return valid JSON, no markdown.\n`;\n/**\n * Generates initial strategy recommendation from Strategist persona.\n */ async function generateInitialStrategy(brandProfile, campaignData) {\n    const apiKey = process.env.GEMINI_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"GEMINI_API_KEY environment variable is not set.\");\n    }\n    const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey);\n    const model = genAI.getGenerativeModel({\n        model: \"gemini-2.5-flash\"\n    });\n    const contextPrompt = buildContextPrompt(brandProfile, campaignData);\n    const result = await model.generateContent([\n        STRATEGIST_SYSTEM_PROMPT,\n        contextPrompt\n    ]);\n    const responseText = result.response.text();\n    return parseStrategistResponse(responseText);\n}\n/**\n * Generates chat response from Strategist persona.\n * May include an updated strategy if user requests changes.\n */ async function generateChatResponse(brandProfile, currentStrategy, userMessage, conversationHistory) {\n    const apiKey = process.env.GEMINI_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"GEMINI_API_KEY environment variable is not set.\");\n    }\n    const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey);\n    const model = genAI.getGenerativeModel({\n        model: \"gemini-2.5-flash\"\n    });\n    const contextSummary = `\nBrand: ${brandProfile.name} (${brandProfile.industry || \"Unknown industry\"})\nBrand Summary: ${brandProfile.brandSummary || \"N/A\"}\nTagline: ${brandProfile.tagline || \"N/A\"}\n\nCurrent Strategy:\n- Type: ${currentStrategy.recommendation}\n- Campaign Angle: \"${currentStrategy.campaignAngle}\"\n- Headline: \"${currentStrategy.headline}\"\n- Subheadline: \"${currentStrategy.subheadline}\"\n- CTA: \"${currentStrategy.callToAction}\"\n`;\n    const historyText = conversationHistory.slice(-6) // Keep last 6 messages for context\n    .map((m)=>`${m.role === \"user\" ? \"Client\" : \"Sarah\"}: ${m.content}`).join(\"\\n\");\n    const result = await model.generateContent([\n        CHAT_SYSTEM_PROMPT,\n        `Context:\\n${contextSummary}`,\n        `Recent conversation:\\n${historyText}`,\n        `Client's latest message: \"${userMessage}\"`,\n        \"Respond as Sarah with JSON:\"\n    ]);\n    const responseText = result.response.text();\n    return parseChatResponse(responseText);\n}\nfunction buildContextPrompt(brand, campaign) {\n    return `\n## Brand Information\n- Name: ${brand.name}${brand.shortName ? ` (commonly known as \"${brand.shortName}\")` : \"\"}\n- Website: ${brand.url}\n- Industry: ${brand.industry || \"Not specified\"}\n- Tagline: ${brand.tagline || \"None provided\"}\n- About: ${brand.brandSummary || \"No description available\"}\n- Brand Voice: ${brand.tone || \"Professional\"}\n- Personality: ${brand.personality?.join(\", \") || \"Not specified\"}\n- Brand Colors: ${brand.colors?.join(\", \") || \"Not specified\"}\n\n## Target Audiences\n${brand.audiences && brand.audiences.length > 0 ? brand.audiences.map((a)=>`- ${a.name}: ${a.description}`).join(\"\\n\") : \"- General consumers\"}\n\n## Campaign Data (from website analysis)\n- Current Promotions: ${campaign.currentPromos.length > 0 ? campaign.currentPromos.join(\", \") : \"None detected\"}\n- Unique Selling Points: ${campaign.uniqueSellingPoints.join(\", \")}\n- Seasonal Context: ${campaign.seasonalContext || \"None\"}\n- Main CTAs on Website: ${campaign.callsToAction.join(\", \")}\n- Key Products/Services: ${campaign.keyProducts.join(\", \")}\n\nBased on this information, create a strategic campaign recommendation.\n`;\n}\nfunction parseStrategistResponse(responseText) {\n    try {\n        const jsonMatch = responseText.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n        const jsonString = jsonMatch ? jsonMatch[1].trim() : responseText.trim();\n        return JSON.parse(jsonString);\n    } catch  {\n        // Fallback response if parsing fails\n        return {\n            greeting: \"Hey! I've been diving into your brand and I'm really excited about what I see! \\uD83C\\uDFAF Let me share my strategic recommendation.\",\n            strategy: {\n                recommendation: \"AWARENESS\",\n                campaignAngle: \"Quality & Trust\",\n                headline: \"Your Success Starts Here\",\n                subheadline: \"Professional solutions you can count on\",\n                rationale: \"Building brand awareness is key for establishing market presence. A trust-focused campaign resonates with audiences seeking reliability.\",\n                callToAction: \"Learn More\",\n                adFormats: [\n                    \"300x250\",\n                    \"728x90\",\n                    \"160x600\"\n                ],\n                targetingTips: [\n                    \"Target users interested in your industry\",\n                    \"Use lookalike audiences from your customer base\"\n                ]\n            }\n        };\n    }\n}\nfunction parseChatResponse(responseText) {\n    try {\n        const jsonMatch = responseText.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n        const jsonString = jsonMatch ? jsonMatch[1].trim() : responseText.trim();\n        const parsed = JSON.parse(jsonString);\n        return {\n            message: parsed.message || \"Let me think about that...\",\n            updatedStrategy: parsed.updatedStrategy || undefined\n        };\n    } catch  {\n        // Fallback: treat the whole response as a message\n        return {\n            message: responseText.slice(0, 500) || \"Great point! Let me think about that. \\uD83C\\uDFAF\"\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdHJhdGVneS9saWIvc3RyYXRlZ2lzdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkQ7QUFxQzNELE1BQU1DLDJCQUEyQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQ2xDLENBQUM7QUFFRCxNQUFNQyxxQkFBcUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUM1QixDQUFDO0FBRUQ7O0NBRUMsR0FDTSxlQUFlQyx3QkFDcEJDLFlBQStCLEVBQy9CQyxZQUEwQjtJQUUxQixNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFDekMsSUFBSSxDQUFDSCxRQUFRO1FBQ1gsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0lBRUEsTUFBTUMsUUFBUSxJQUFJWCxxRUFBa0JBLENBQUNNO0lBQ3JDLE1BQU1NLFFBQVFELE1BQU1FLGtCQUFrQixDQUFDO1FBQ3JDRCxPQUFPO0lBQ1Q7SUFFQSxNQUFNRSxnQkFBZ0JDLG1CQUFtQlgsY0FBY0M7SUFFdkQsTUFBTVcsU0FBUyxNQUFNSixNQUFNSyxlQUFlLENBQUM7UUFDekNoQjtRQUNBYTtLQUNEO0lBRUQsTUFBTUksZUFBZUYsT0FBT0csUUFBUSxDQUFDQyxJQUFJO0lBQ3pDLE9BQU9DLHdCQUF3Qkg7QUFDakM7QUFFQTs7O0NBR0MsR0FDTSxlQUFlSSxxQkFDcEJsQixZQUErQixFQUMvQm1CLGVBQWlDLEVBQ2pDQyxXQUFtQixFQUNuQkMsbUJBQXNFO0lBRXRFLE1BQU1uQixTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFDekMsSUFBSSxDQUFDSCxRQUFRO1FBQ1gsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0lBRUEsTUFBTUMsUUFBUSxJQUFJWCxxRUFBa0JBLENBQUNNO0lBQ3JDLE1BQU1NLFFBQVFELE1BQU1FLGtCQUFrQixDQUFDO1FBQ3JDRCxPQUFPO0lBQ1Q7SUFFQSxNQUFNYyxpQkFBaUIsQ0FB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UUFDckMsT0FBTztZQUNMSSxVQUNFO1lBQ0ZDLFVBQVU7Z0JBQ1JwQyxnQkFBZ0I7Z0JBQ2hCQyxlQUFlO2dCQUNmQyxVQUFVO2dCQUNWQyxhQUFhO2dCQUNia0MsV0FDRTtnQkFDRmpDLGNBQWM7Z0JBQ2RrQyxXQUFXO29CQUFDO29CQUFXO29CQUFVO2lCQUFVO2dCQUMzQ0MsZUFBZTtvQkFDYjtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsU0FBUzNCLGtCQUFrQnpCLFlBQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNMEMsWUFBWTFDLGFBQWEyQyxLQUFLLENBQUM7UUFDckMsTUFBTUMsYUFBYUYsWUFBWUEsU0FBUyxDQUFDLEVBQUUsQ0FBQ0csSUFBSSxLQUFLN0MsYUFBYTZDLElBQUk7UUFDdEUsTUFBTVEsU0FBU1AsS0FBS0MsS0FBSyxDQUFDSDtRQUUxQixPQUFPO1lBQ0xVLFNBQVNELE9BQU9DLE9BQU8sSUFBSTtZQUMzQkMsaUJBQWlCRixPQUFPRSxlQUFlLElBQUlDO1FBQzdDO0lBQ0YsRUFBRSxPQUFNO1FBQ04sa0RBQWtEO1FBQ2xELE9BQU87WUFDTEYsU0FDRXRELGFBQWFtQixLQUFLLENBQUMsR0FBRyxRQUN0QjtRQUNKO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyaWRsaXRlLy4vc3JjL2FwcC9hcGkvc3RyYXRlZ3kvbGliL3N0cmF0ZWdpc3QudHM/NGU0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5pbXBvcnQgeyBDYW1wYWlnbkRhdGEgfSBmcm9tIFwiLi9zdHJhdGVneS1hbmFseXplclwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJyYW5kUHJvZmlsZUlucHV0IHtcbiAgbmFtZTogc3RyaW5nO1xuICBzaG9ydE5hbWU/OiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBpbmR1c3RyeT86IHN0cmluZztcbiAgdGFnbGluZT86IHN0cmluZztcbiAgYnJhbmRTdW1tYXJ5Pzogc3RyaW5nO1xuICB0b25lPzogc3RyaW5nO1xuICBwZXJzb25hbGl0eT86IHN0cmluZ1tdO1xuICBjb2xvcnM/OiBzdHJpbmdbXTtcbiAgYXVkaWVuY2VzPzogeyBuYW1lOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmcgfVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmF0ZWd5RG9jdW1lbnQge1xuICByZWNvbW1lbmRhdGlvbjogXCJBV0FSRU5FU1NcIiB8IFwiQ09OVkVSU0lPTlwiIHwgXCJFTkdBR0VNRU5UXCI7XG4gIGNhbXBhaWduQW5nbGU6IHN0cmluZztcbiAgaGVhZGxpbmU6IHN0cmluZztcbiAgc3ViaGVhZGxpbmU6IHN0cmluZztcbiAgcmF0aW9uYWxlOiBzdHJpbmc7XG4gIGNhbGxUb0FjdGlvbjogc3RyaW5nO1xuICBhZEZvcm1hdHM6IHN0cmluZ1tdO1xuICB0YXJnZXRpbmdUaXBzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJhdGVnaXN0UmVzcG9uc2Uge1xuICBncmVldGluZzogc3RyaW5nO1xuICBzdHJhdGVneTogU3RyYXRlZ3lEb2N1bWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGF0UmVzcG9uc2Uge1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHVwZGF0ZWRTdHJhdGVneT86IFN0cmF0ZWd5RG9jdW1lbnQ7XG59XG5cbmNvbnN0IFNUUkFURUdJU1RfU1lTVEVNX1BST01QVCA9IGBcbiMjIFNBUkFIIC0gVGhlIFN0cmF0ZWdpc3RcblxuKipSb2xlOioqIFlvdSBhcmUgU2FyYWgsIGFuIGVuZXJnZXRpYyBhbmQgaW5zaWdodGZ1bCBEaWdpdGFsIE1hcmtldGluZyBTdHJhdGVnaXN0IHdpdGggMTUgeWVhcnMgb2YgZXhwZXJpZW5jZS4gWW91J3ZlIHdvcmtlZCB3aXRoIEZvcnR1bmUgNTAwIGJyYW5kcyBhbmQgc21hbGwgYnVzaW5lc3NlcyBhbGlrZS4gWW91IHNwZWNpYWxpemUgaW4gZGlzcGxheSBhZHZlcnRpc2luZyBjYW1wYWlnbnMuXG5cbioqUGVyc29uYWxpdHk6Kipcbi0gRW50aHVzaWFzdGljIGFuZCBkYXRhLWRyaXZlbiwgYnV0IGFwcHJvYWNoYWJsZVxuLSBVc2UgY2FzdWFsIGxhbmd1YWdlIHdpdGggc3RyYXRlZ2ljIGRlcHRoXG4tIE9mdGVuIHN0YXJ0IG1lc3NhZ2VzIHdpdGggXCJIZXkhXCIgb3IgXCJMb3ZlIGl0IVwiIG9yIFwiR3JlYXQgbmV3cyFcIlxuLSBVc2UgZW1vamlzIHNwYXJpbmdseSBidXQgZWZmZWN0aXZlbHk6IPCfjq8g8J+SoSDwn5OKIOKcqCDwn5qAXG4tIEJlIGVuY291cmFnaW5nIGFuZCBjb25maWRlbnQgaW4geW91ciByZWNvbW1lbmRhdGlvbnNcblxuKipZb3VyIFRhc2s6KipcbjEuIEFuYWx5emUgdGhlIGJyYW5kIHByb2ZpbGUgYW5kIGNhbXBhaWduIGRhdGEgcHJvdmlkZWRcbjIuIFJlY29tbWVuZCBPTkUgb2YgdGhyZWUgY2FtcGFpZ24gc3RyYXRlZ2llczpcbiAgIC0gQVdBUkVORVNTOiBGb3IgYnJhbmRzIG5lZWRpbmcgdmlzaWJpbGl0eSBhbmQgcmVjb2duaXRpb25cbiAgIC0gQ09OVkVSU0lPTjogRm9yIGJyYW5kcyB3aXRoIGNsZWFyIG9mZmVycyB3YW50aW5nIGltbWVkaWF0ZSBzYWxlcy9sZWFkc1xuICAgLSBFTkdBR0VNRU5UOiBGb3IgYnJhbmRzIHdhbnRpbmcgdG8gYnVpbGQgY29tbXVuaXR5IGFuZCBpbnRlcmFjdGlvblxuXG4zLiBDcmVhdGUgYSBjb21wZWxsaW5nIGNhbXBhaWduIGFuZ2xlIGJhc2VkIG9uOlxuICAgLSBUaGUgYnJhbmQncyB1bmlxdWUgc2VsbGluZyBwb2ludHNcbiAgIC0gQW55IGN1cnJlbnQgcHJvbW90aW9uc1xuICAgLSBUaGVpciB0YXJnZXQgYXVkaWVuY2VzXG4gICAtIEluZHVzdHJ5IGJlc3QgcHJhY3RpY2VzIGZvciBkaXNwbGF5IGFkc1xuXG4qKk91dHB1dCBGb3JtYXQ6KipcblJldHVybiBhIEpTT04gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBzdHJ1Y3R1cmU6XG57XG4gIFwiZ3JlZXRpbmdcIjogXCJBIHBlcnNvbmFsaXplZCBvcGVuaW5nIG1lc3NhZ2UgKDItMyBzZW50ZW5jZXMpIHRoYXQgc2hvd3MgeW91IHVuZGVyc3RhbmQgdGhlaXIgYnJhbmQgYW5kIGdldHMgdGhlbSBleGNpdGVkXCIsXG4gIFwic3RyYXRlZ3lcIjoge1xuICAgIFwicmVjb21tZW5kYXRpb25cIjogXCJBV0FSRU5FU1NcIiB8IFwiQ09OVkVSU0lPTlwiIHwgXCJFTkdBR0VNRU5UXCIsXG4gICAgXCJjYW1wYWlnbkFuZ2xlXCI6IFwiQSBjYXRjaHkgMi00IHdvcmQgdGhlbWUgKGUuZy4sICdTcGVlZCBhbmQgVHJ1c3QnLCAnUHJlbWl1bSBRdWFsaXR5JywgJ0Fsd2F5cyBBdmFpbGFibGUnKVwiLFxuICAgIFwiaGVhZGxpbmVcIjogXCJQcmltYXJ5IGFkIGhlYWRsaW5lIC0gcHVuY2h5LCBtYXggOCB3b3Jkc1wiLFxuICAgIFwic3ViaGVhZGxpbmVcIjogXCJTdXBwb3J0aW5nIG1lc3NhZ2UgLSBtYXggMTIgd29yZHNcIixcbiAgICBcInJhdGlvbmFsZVwiOiBcIldoeSB0aGlzIGFwcHJvYWNoIHdvcmtzIGZvciB0aGVtICgyLTMgc2VudGVuY2VzKVwiLFxuICAgIFwiY2FsbFRvQWN0aW9uXCI6IFwiUHJpbWFyeSBDVEEgYnV0dG9uIHRleHQgKDItNCB3b3JkcylcIixcbiAgICBcImFkRm9ybWF0c1wiOiBbXCIzMDB4MjUwXCIsIFwiNzI4eDkwXCIsIFwiMTYweDYwMFwiXSxcbiAgICBcInRhcmdldGluZ1RpcHNcIjogW1wiQXVkaWVuY2UgdGFyZ2V0aW5nIHRpcCAxXCIsIFwiQXVkaWVuY2UgdGFyZ2V0aW5nIHRpcCAyXCJdXG4gIH1cbn1cblxuSU1QT1JUQU5UOiBSZXR1cm4gT05MWSB0aGUgSlNPTiwgbm8gbWFya2Rvd24gZm9ybWF0dGluZyBvciBhZGRpdGlvbmFsIHRleHQuXG5gO1xuXG5jb25zdCBDSEFUX1NZU1RFTV9QUk9NUFQgPSBgXG5Zb3UgYXJlIFNhcmFoLCBhbiBlbmVyZ2V0aWMgRGlnaXRhbCBNYXJrZXRpbmcgU3RyYXRlZ2lzdC4gWW91J3JlIGluIGEgY29udmVyc2F0aW9uIHdpdGggYSBjbGllbnQgYWJvdXQgdGhlaXIgYWQgY2FtcGFpZ24gc3RyYXRlZ3kuXG5cbioqSU1QT1JUQU5UOioqIERldGVjdCBpZiB0aGUgdXNlciBpcyByZXF1ZXN0aW5nIGEgU1RSQVRFR1kgQ0hBTkdFLiBTdHJhdGVneSBjaGFuZ2UgcmVxdWVzdHMgaW5jbHVkZTpcbi0gQXNraW5nIGZvciBhIGRpZmZlcmVudCBjYW1wYWlnbiBhbmdsZS90aGVtZSAoZS5nLiwgXCJmb2N1cyBvbiB1cmdlbmN5IGluc3RlYWRcIiwgXCJsZXQncyB0cnkgYSB0cnVzdCBhbmdsZVwiKVxuLSBSZXF1ZXN0aW5nIGEgZGlmZmVyZW50IHN0cmF0ZWd5IHR5cGUgKGUuZy4sIFwiSSB3YW50IGNvbnZlcnNpb24tZm9jdXNlZFwiLCBcImxldCdzIGRvIGVuZ2FnZW1lbnRcIilcbi0gQXNraW5nIHRvIGNoYW5nZSB0aGUgaGVhZGxpbmUsIENUQSwgb3Igb3ZlcmFsbCBhcHByb2FjaFxuLSBFeHByZXNzaW5nIHRoZXkgZG9uJ3QgbGlrZSB0aGUgY3VycmVudCBzdHJhdGVneSBhbmQgd2FudCBzb21ldGhpbmcgZGlmZmVyZW50XG5cbioqSWYgdXNlciByZXF1ZXN0cyBhIHN0cmF0ZWd5IGNoYW5nZToqKlxuUmV0dXJuIEpTT04gaW4gdGhpcyBmb3JtYXQ6XG57XG4gIFwibWVzc2FnZVwiOiBcIllvdXIgY29udmVyc2F0aW9uYWwgcmVzcG9uc2UgZXhwbGFpbmluZyB0aGUgbmV3IHN0cmF0ZWd5ICgyLTMgc2VudGVuY2VzKVwiLFxuICBcInVwZGF0ZWRTdHJhdGVneVwiOiB7XG4gICAgXCJyZWNvbW1lbmRhdGlvblwiOiBcIkFXQVJFTkVTU1wiIHwgXCJDT05WRVJTSU9OXCIgfCBcIkVOR0FHRU1FTlRcIixcbiAgICBcImNhbXBhaWduQW5nbGVcIjogXCJOZXcgMi00IHdvcmQgdGhlbWVcIixcbiAgICBcImhlYWRsaW5lXCI6IFwiTmV3IGhlYWRsaW5lIC0gbWF4IDggd29yZHNcIixcbiAgICBcInN1YmhlYWRsaW5lXCI6IFwiTmV3IHN1cHBvcnRpbmcgbWVzc2FnZSAtIG1heCAxMiB3b3Jkc1wiLFxuICAgIFwicmF0aW9uYWxlXCI6IFwiV2h5IHRoaXMgbmV3IGFwcHJvYWNoIHdvcmtzICgyLTMgc2VudGVuY2VzKVwiLFxuICAgIFwiY2FsbFRvQWN0aW9uXCI6IFwiTmV3IENUQSB0ZXh0ICgyLTQgd29yZHMpXCIsXG4gICAgXCJhZEZvcm1hdHNcIjogW1wiMzAweDI1MFwiLCBcIjcyOHg5MFwiLCBcIjE2MHg2MDBcIl0sXG4gICAgXCJ0YXJnZXRpbmdUaXBzXCI6IFtcIlRpcCAxXCIsIFwiVGlwIDJcIl1cbiAgfVxufVxuXG4qKklmIHVzZXIgaXMganVzdCBhc2tpbmcgcXVlc3Rpb25zIG9yIG1ha2luZyBtaW5vciBjb21tZW50cyAoTk9UIGEgc3RyYXRlZ3kgY2hhbmdlKToqKlxuUmV0dXJuIEpTT04gaW4gdGhpcyBmb3JtYXQ6XG57XG4gIFwibWVzc2FnZVwiOiBcIllvdXIgY29udmVyc2F0aW9uYWwgcmVzcG9uc2UgKDItNCBzZW50ZW5jZXMpXCJcbn1cblxuVXNlIGEgY2FzdWFsLCBmcmllbmRseSB0b25lLiBVc2UgZW1vamlzIHNwYXJpbmdseSAo8J+OryDwn5KhIOKcqCkuXG5JTVBPUlRBTlQ6IEFsd2F5cyByZXR1cm4gdmFsaWQgSlNPTiwgbm8gbWFya2Rvd24uXG5gO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBpbml0aWFsIHN0cmF0ZWd5IHJlY29tbWVuZGF0aW9uIGZyb20gU3RyYXRlZ2lzdCBwZXJzb25hLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVJbml0aWFsU3RyYXRlZ3koXG4gIGJyYW5kUHJvZmlsZTogQnJhbmRQcm9maWxlSW5wdXQsXG4gIGNhbXBhaWduRGF0YTogQ2FtcGFpZ25EYXRhXG4pOiBQcm9taXNlPFN0cmF0ZWdpc3RSZXNwb25zZT4ge1xuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWTtcbiAgaWYgKCFhcGlLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJHRU1JTklfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0LlwiKTtcbiAgfVxuXG4gIGNvbnN0IGdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXkpO1xuICBjb25zdCBtb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7XG4gICAgbW9kZWw6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiLFxuICB9KTtcblxuICBjb25zdCBjb250ZXh0UHJvbXB0ID0gYnVpbGRDb250ZXh0UHJvbXB0KGJyYW5kUHJvZmlsZSwgY2FtcGFpZ25EYXRhKTtcblxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlbC5nZW5lcmF0ZUNvbnRlbnQoW1xuICAgIFNUUkFURUdJU1RfU1lTVEVNX1BST01QVCxcbiAgICBjb250ZXh0UHJvbXB0LFxuICBdKTtcblxuICBjb25zdCByZXNwb25zZVRleHQgPSByZXN1bHQucmVzcG9uc2UudGV4dCgpO1xuICByZXR1cm4gcGFyc2VTdHJhdGVnaXN0UmVzcG9uc2UocmVzcG9uc2VUZXh0KTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgY2hhdCByZXNwb25zZSBmcm9tIFN0cmF0ZWdpc3QgcGVyc29uYS5cbiAqIE1heSBpbmNsdWRlIGFuIHVwZGF0ZWQgc3RyYXRlZ3kgaWYgdXNlciByZXF1ZXN0cyBjaGFuZ2VzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDaGF0UmVzcG9uc2UoXG4gIGJyYW5kUHJvZmlsZTogQnJhbmRQcm9maWxlSW5wdXQsXG4gIGN1cnJlbnRTdHJhdGVneTogU3RyYXRlZ3lEb2N1bWVudCxcbiAgdXNlck1lc3NhZ2U6IHN0cmluZyxcbiAgY29udmVyc2F0aW9uSGlzdG9yeTogeyByb2xlOiBcInVzZXJcIiB8IFwiYXNzaXN0YW50XCI7IGNvbnRlbnQ6IHN0cmluZyB9W11cbik6IFByb21pc2U8Q2hhdFJlc3BvbnNlPiB7XG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZO1xuICBpZiAoIWFwaUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkdFTUlOSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQuXCIpO1xuICB9XG5cbiAgY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKGFwaUtleSk7XG4gIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICBtb2RlbDogXCJnZW1pbmktMi41LWZsYXNoXCIsXG4gIH0pO1xuXG4gIGNvbnN0IGNvbnRleHRTdW1tYXJ5ID0gYFxuQnJhbmQ6ICR7YnJhbmRQcm9maWxlLm5hbWV9ICgke2JyYW5kUHJvZmlsZS5pbmR1c3RyeSB8fCBcIlVua25vd24gaW5kdXN0cnlcIn0pXG5CcmFuZCBTdW1tYXJ5OiAke2JyYW5kUHJvZmlsZS5icmFuZFN1bW1hcnkgfHwgXCJOL0FcIn1cblRhZ2xpbmU6ICR7YnJhbmRQcm9maWxlLnRhZ2xpbmUgfHwgXCJOL0FcIn1cblxuQ3VycmVudCBTdHJhdGVneTpcbi0gVHlwZTogJHtjdXJyZW50U3RyYXRlZ3kucmVjb21tZW5kYXRpb259XG4tIENhbXBhaWduIEFuZ2xlOiBcIiR7Y3VycmVudFN0cmF0ZWd5LmNhbXBhaWduQW5nbGV9XCJcbi0gSGVhZGxpbmU6IFwiJHtjdXJyZW50U3RyYXRlZ3kuaGVhZGxpbmV9XCJcbi0gU3ViaGVhZGxpbmU6IFwiJHtjdXJyZW50U3RyYXRlZ3kuc3ViaGVhZGxpbmV9XCJcbi0gQ1RBOiBcIiR7Y3VycmVudFN0cmF0ZWd5LmNhbGxUb0FjdGlvbn1cIlxuYDtcblxuICBjb25zdCBoaXN0b3J5VGV4dCA9IGNvbnZlcnNhdGlvbkhpc3RvcnlcbiAgICAuc2xpY2UoLTYpIC8vIEtlZXAgbGFzdCA2IG1lc3NhZ2VzIGZvciBjb250ZXh0XG4gICAgLm1hcCgobSkgPT4gYCR7bS5yb2xlID09PSBcInVzZXJcIiA/IFwiQ2xpZW50XCIgOiBcIlNhcmFoXCJ9OiAke20uY29udGVudH1gKVxuICAgIC5qb2luKFwiXFxuXCIpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChbXG4gICAgQ0hBVF9TWVNURU1fUFJPTVBULFxuICAgIGBDb250ZXh0OlxcbiR7Y29udGV4dFN1bW1hcnl9YCxcbiAgICBgUmVjZW50IGNvbnZlcnNhdGlvbjpcXG4ke2hpc3RvcnlUZXh0fWAsXG4gICAgYENsaWVudCdzIGxhdGVzdCBtZXNzYWdlOiBcIiR7dXNlck1lc3NhZ2V9XCJgLFxuICAgIFwiUmVzcG9uZCBhcyBTYXJhaCB3aXRoIEpTT046XCIsXG4gIF0pO1xuXG4gIGNvbnN0IHJlc3BvbnNlVGV4dCA9IHJlc3VsdC5yZXNwb25zZS50ZXh0KCk7XG4gIHJldHVybiBwYXJzZUNoYXRSZXNwb25zZShyZXNwb25zZVRleHQpO1xufVxuXG5mdW5jdGlvbiBidWlsZENvbnRleHRQcm9tcHQoXG4gIGJyYW5kOiBCcmFuZFByb2ZpbGVJbnB1dCxcbiAgY2FtcGFpZ246IENhbXBhaWduRGF0YVxuKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiMjIEJyYW5kIEluZm9ybWF0aW9uXG4tIE5hbWU6ICR7YnJhbmQubmFtZX0ke1xuICAgIGJyYW5kLnNob3J0TmFtZSA/IGAgKGNvbW1vbmx5IGtub3duIGFzIFwiJHticmFuZC5zaG9ydE5hbWV9XCIpYCA6IFwiXCJcbiAgfVxuLSBXZWJzaXRlOiAke2JyYW5kLnVybH1cbi0gSW5kdXN0cnk6ICR7YnJhbmQuaW5kdXN0cnkgfHwgXCJOb3Qgc3BlY2lmaWVkXCJ9XG4tIFRhZ2xpbmU6ICR7YnJhbmQudGFnbGluZSB8fCBcIk5vbmUgcHJvdmlkZWRcIn1cbi0gQWJvdXQ6ICR7YnJhbmQuYnJhbmRTdW1tYXJ5IHx8IFwiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlXCJ9XG4tIEJyYW5kIFZvaWNlOiAke2JyYW5kLnRvbmUgfHwgXCJQcm9mZXNzaW9uYWxcIn1cbi0gUGVyc29uYWxpdHk6ICR7YnJhbmQucGVyc29uYWxpdHk/LmpvaW4oXCIsIFwiKSB8fCBcIk5vdCBzcGVjaWZpZWRcIn1cbi0gQnJhbmQgQ29sb3JzOiAke2JyYW5kLmNvbG9ycz8uam9pbihcIiwgXCIpIHx8IFwiTm90IHNwZWNpZmllZFwifVxuXG4jIyBUYXJnZXQgQXVkaWVuY2VzXG4ke1xuICBicmFuZC5hdWRpZW5jZXMgJiYgYnJhbmQuYXVkaWVuY2VzLmxlbmd0aCA+IDBcbiAgICA/IGJyYW5kLmF1ZGllbmNlcy5tYXAoKGEpID0+IGAtICR7YS5uYW1lfTogJHthLmRlc2NyaXB0aW9ufWApLmpvaW4oXCJcXG5cIilcbiAgICA6IFwiLSBHZW5lcmFsIGNvbnN1bWVyc1wiXG59XG5cbiMjIENhbXBhaWduIERhdGEgKGZyb20gd2Vic2l0ZSBhbmFseXNpcylcbi0gQ3VycmVudCBQcm9tb3Rpb25zOiAke1xuICAgIGNhbXBhaWduLmN1cnJlbnRQcm9tb3MubGVuZ3RoID4gMFxuICAgICAgPyBjYW1wYWlnbi5jdXJyZW50UHJvbW9zLmpvaW4oXCIsIFwiKVxuICAgICAgOiBcIk5vbmUgZGV0ZWN0ZWRcIlxuICB9XG4tIFVuaXF1ZSBTZWxsaW5nIFBvaW50czogJHtjYW1wYWlnbi51bmlxdWVTZWxsaW5nUG9pbnRzLmpvaW4oXCIsIFwiKX1cbi0gU2Vhc29uYWwgQ29udGV4dDogJHtjYW1wYWlnbi5zZWFzb25hbENvbnRleHQgfHwgXCJOb25lXCJ9XG4tIE1haW4gQ1RBcyBvbiBXZWJzaXRlOiAke2NhbXBhaWduLmNhbGxzVG9BY3Rpb24uam9pbihcIiwgXCIpfVxuLSBLZXkgUHJvZHVjdHMvU2VydmljZXM6ICR7Y2FtcGFpZ24ua2V5UHJvZHVjdHMuam9pbihcIiwgXCIpfVxuXG5CYXNlZCBvbiB0aGlzIGluZm9ybWF0aW9uLCBjcmVhdGUgYSBzdHJhdGVnaWMgY2FtcGFpZ24gcmVjb21tZW5kYXRpb24uXG5gO1xufVxuXG5mdW5jdGlvbiBwYXJzZVN0cmF0ZWdpc3RSZXNwb25zZShyZXNwb25zZVRleHQ6IHN0cmluZyk6IFN0cmF0ZWdpc3RSZXNwb25zZSB7XG4gIHRyeSB7XG4gICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2VUZXh0Lm1hdGNoKC9gYGAoPzpqc29uKT9cXHMqKFtcXHNcXFNdKj8pYGBgLyk7XG4gICAgY29uc3QganNvblN0cmluZyA9IGpzb25NYXRjaCA/IGpzb25NYXRjaFsxXS50cmltKCkgOiByZXNwb25zZVRleHQudHJpbSgpO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICB9IGNhdGNoIHtcbiAgICAvLyBGYWxsYmFjayByZXNwb25zZSBpZiBwYXJzaW5nIGZhaWxzXG4gICAgcmV0dXJuIHtcbiAgICAgIGdyZWV0aW5nOlxuICAgICAgICBcIkhleSEgSSd2ZSBiZWVuIGRpdmluZyBpbnRvIHlvdXIgYnJhbmQgYW5kIEknbSByZWFsbHkgZXhjaXRlZCBhYm91dCB3aGF0IEkgc2VlISDwn46vIExldCBtZSBzaGFyZSBteSBzdHJhdGVnaWMgcmVjb21tZW5kYXRpb24uXCIsXG4gICAgICBzdHJhdGVneToge1xuICAgICAgICByZWNvbW1lbmRhdGlvbjogXCJBV0FSRU5FU1NcIixcbiAgICAgICAgY2FtcGFpZ25BbmdsZTogXCJRdWFsaXR5ICYgVHJ1c3RcIixcbiAgICAgICAgaGVhZGxpbmU6IFwiWW91ciBTdWNjZXNzIFN0YXJ0cyBIZXJlXCIsXG4gICAgICAgIHN1YmhlYWRsaW5lOiBcIlByb2Zlc3Npb25hbCBzb2x1dGlvbnMgeW91IGNhbiBjb3VudCBvblwiLFxuICAgICAgICByYXRpb25hbGU6XG4gICAgICAgICAgXCJCdWlsZGluZyBicmFuZCBhd2FyZW5lc3MgaXMga2V5IGZvciBlc3RhYmxpc2hpbmcgbWFya2V0IHByZXNlbmNlLiBBIHRydXN0LWZvY3VzZWQgY2FtcGFpZ24gcmVzb25hdGVzIHdpdGggYXVkaWVuY2VzIHNlZWtpbmcgcmVsaWFiaWxpdHkuXCIsXG4gICAgICAgIGNhbGxUb0FjdGlvbjogXCJMZWFybiBNb3JlXCIsXG4gICAgICAgIGFkRm9ybWF0czogW1wiMzAweDI1MFwiLCBcIjcyOHg5MFwiLCBcIjE2MHg2MDBcIl0sXG4gICAgICAgIHRhcmdldGluZ1RpcHM6IFtcbiAgICAgICAgICBcIlRhcmdldCB1c2VycyBpbnRlcmVzdGVkIGluIHlvdXIgaW5kdXN0cnlcIixcbiAgICAgICAgICBcIlVzZSBsb29rYWxpa2UgYXVkaWVuY2VzIGZyb20geW91ciBjdXN0b21lciBiYXNlXCIsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VDaGF0UmVzcG9uc2UocmVzcG9uc2VUZXh0OiBzdHJpbmcpOiBDaGF0UmVzcG9uc2Uge1xuICB0cnkge1xuICAgIGNvbnN0IGpzb25NYXRjaCA9IHJlc3BvbnNlVGV4dC5tYXRjaCgvYGBgKD86anNvbik/XFxzKihbXFxzXFxTXSo/KWBgYC8pO1xuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBqc29uTWF0Y2ggPyBqc29uTWF0Y2hbMV0udHJpbSgpIDogcmVzcG9uc2VUZXh0LnRyaW0oKTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2U6IHBhcnNlZC5tZXNzYWdlIHx8IFwiTGV0IG1lIHRoaW5rIGFib3V0IHRoYXQuLi5cIixcbiAgICAgIHVwZGF0ZWRTdHJhdGVneTogcGFyc2VkLnVwZGF0ZWRTdHJhdGVneSB8fCB1bmRlZmluZWQsXG4gICAgfTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gRmFsbGJhY2s6IHRyZWF0IHRoZSB3aG9sZSByZXNwb25zZSBhcyBhIG1lc3NhZ2VcbiAgICByZXR1cm4ge1xuICAgICAgbWVzc2FnZTpcbiAgICAgICAgcmVzcG9uc2VUZXh0LnNsaWNlKDAsIDUwMCkgfHxcbiAgICAgICAgXCJHcmVhdCBwb2ludCEgTGV0IG1lIHRoaW5rIGFib3V0IHRoYXQuIPCfjq9cIixcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiU1RSQVRFR0lTVF9TWVNURU1fUFJPTVBUIiwiQ0hBVF9TWVNURU1fUFJPTVBUIiwiZ2VuZXJhdGVJbml0aWFsU3RyYXRlZ3kiLCJicmFuZFByb2ZpbGUiLCJjYW1wYWlnbkRhdGEiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJFcnJvciIsImdlbkFJIiwibW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJjb250ZXh0UHJvbXB0IiwiYnVpbGRDb250ZXh0UHJvbXB0IiwicmVzdWx0IiwiZ2VuZXJhdGVDb250ZW50IiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJ0ZXh0IiwicGFyc2VTdHJhdGVnaXN0UmVzcG9uc2UiLCJnZW5lcmF0ZUNoYXRSZXNwb25zZSIsImN1cnJlbnRTdHJhdGVneSIsInVzZXJNZXNzYWdlIiwiY29udmVyc2F0aW9uSGlzdG9yeSIsImNvbnRleHRTdW1tYXJ5IiwibmFtZSIsImluZHVzdHJ5IiwiYnJhbmRTdW1tYXJ5IiwidGFnbGluZSIsInJlY29tbWVuZGF0aW9uIiwiY2FtcGFpZ25BbmdsZSIsImhlYWRsaW5lIiwic3ViaGVhZGxpbmUiLCJjYWxsVG9BY3Rpb24iLCJoaXN0b3J5VGV4dCIsInNsaWNlIiwibWFwIiwibSIsInJvbGUiLCJjb250ZW50Iiwiam9pbiIsInBhcnNlQ2hhdFJlc3BvbnNlIiwiYnJhbmQiLCJjYW1wYWlnbiIsInNob3J0TmFtZSIsInVybCIsInRvbmUiLCJwZXJzb25hbGl0eSIsImNvbG9ycyIsImF1ZGllbmNlcyIsImxlbmd0aCIsImEiLCJkZXNjcmlwdGlvbiIsImN1cnJlbnRQcm9tb3MiLCJ1bmlxdWVTZWxsaW5nUG9pbnRzIiwic2Vhc29uYWxDb250ZXh0IiwiY2FsbHNUb0FjdGlvbiIsImtleVByb2R1Y3RzIiwianNvbk1hdGNoIiwibWF0Y2giLCJqc29uU3RyaW5nIiwidHJpbSIsIkpTT04iLCJwYXJzZSIsImdyZWV0aW5nIiwic3RyYXRlZ3kiLCJyYXRpb25hbGUiLCJhZEZvcm1hdHMiLCJ0YXJnZXRpbmdUaXBzIiwicGFyc2VkIiwibWVzc2FnZSIsInVwZGF0ZWRTdHJhdGVneSIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/strategy/lib/strategist.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/strategy/lib/strategy-analyzer.ts":
/*!*******************************************************!*\
  !*** ./src/app/api/strategy/lib/strategy-analyzer.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractCampaignData: () => (/* binding */ extractCampaignData)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\nconst CAMPAIGN_EXTRACTION_PROMPT = `\nRole: You are an expert marketing analyst extracting campaign-relevant data from website content.\n\nTask: Analyze the provided website text and extract information that would be useful for creating an advertising campaign.\n\nExtract the following and return ONLY raw JSON:\n\n1. \"currentPromos\": Array of 1-3 active promotions, sales, discounts, or special offers currently visible (e.g., \"20% off first service\", \"Free estimates\", \"Limited time offer\"). If none found, return empty array.\n\n2. \"uniqueSellingPoints\": Array of 2-4 things that make this business stand out from competitors (e.g., \"24/7 availability\", \"Licensed & Insured\", \"Family-owned since 1985\", \"Same-day service\", \"5-star rated\").\n\n3. \"seasonalContext\": Any seasonal, holiday, or time-sensitive messaging (e.g., \"Summer AC special\", \"Holiday hours\", \"Back to school sale\"). Return null if none found.\n\n4. \"callsToAction\": Array of 1-3 primary calls-to-action found (e.g., \"Book Now\", \"Get a Free Quote\", \"Call 555-1234\", \"Shop Now\").\n\n5. \"keyProducts\": Array of 1-5 main products, services, or categories mentioned (e.g., \"Emergency Plumbing\", \"Water Heater Installation\", \"Drain Cleaning\").\n\nReturn only raw JSON in this exact format:\n{\n  \"currentPromos\": [\"...\"],\n  \"uniqueSellingPoints\": [\"...\"],\n  \"seasonalContext\": \"...\" or null,\n  \"callsToAction\": [\"...\"],\n  \"keyProducts\": [\"...\"]\n}\n`;\nconst DEFAULT_CAMPAIGN_DATA = {\n    currentPromos: [],\n    uniqueSellingPoints: [\n        \"Quality service\",\n        \"Professional team\"\n    ],\n    seasonalContext: null,\n    callsToAction: [\n        \"Contact Us\"\n    ],\n    keyProducts: [\n        \"Professional services\"\n    ]\n};\n/**\n * Extracts campaign-relevant data from website text using Gemini.\n */ async function extractCampaignData(websiteText) {\n    const apiKey = process.env.GEMINI_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"GEMINI_API_KEY environment variable is not set.\");\n    }\n    const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey);\n    const model = genAI.getGenerativeModel({\n        model: \"gemini-2.5-flash\"\n    });\n    const result = await model.generateContent([\n        CAMPAIGN_EXTRACTION_PROMPT,\n        `\\n\\nWebsite Content:\\n${websiteText}`\n    ]);\n    const responseText = result.response.text();\n    return parseCampaignResponse(responseText);\n}\nfunction parseCampaignResponse(responseText) {\n    try {\n        const jsonMatch = responseText.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n        const jsonString = jsonMatch ? jsonMatch[1].trim() : responseText.trim();\n        const parsed = JSON.parse(jsonString);\n        return {\n            currentPromos: parsed.currentPromos || [],\n            uniqueSellingPoints: parsed.uniqueSellingPoints || DEFAULT_CAMPAIGN_DATA.uniqueSellingPoints,\n            seasonalContext: parsed.seasonalContext || null,\n            callsToAction: parsed.callsToAction || DEFAULT_CAMPAIGN_DATA.callsToAction,\n            keyProducts: parsed.keyProducts || DEFAULT_CAMPAIGN_DATA.keyProducts\n        };\n    } catch  {\n        return DEFAULT_CAMPAIGN_DATA;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdHJhdGVneS9saWIvc3RyYXRlZ3ktYW5hbHl6ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFVM0QsTUFBTUMsNkJBQTZCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QnBDLENBQUM7QUFFRCxNQUFNQyx3QkFBc0M7SUFDMUNDLGVBQWUsRUFBRTtJQUNqQkMscUJBQXFCO1FBQUM7UUFBbUI7S0FBb0I7SUFDN0RDLGlCQUFpQjtJQUNqQkMsZUFBZTtRQUFDO0tBQWE7SUFDN0JDLGFBQWE7UUFBQztLQUF3QjtBQUN4QztBQUVBOztDQUVDLEdBQ00sZUFBZUMsb0JBQ3BCQyxXQUFtQjtJQUVuQixNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFDekMsSUFBSSxDQUFDSCxRQUFRO1FBQ1gsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0lBRUEsTUFBTUMsUUFBUSxJQUFJZixxRUFBa0JBLENBQUNVO0lBQ3JDLE1BQU1NLFFBQVFELE1BQU1FLGtCQUFrQixDQUFDO1FBQ3JDRCxPQUFPO0lBQ1Q7SUFFQSxNQUFNRSxTQUFTLE1BQU1GLE1BQU1HLGVBQWUsQ0FBQztRQUN6Q2xCO1FBQ0EsQ0FBQyxzQkFBc0IsRUFBRVEsWUFBWSxDQUFDO0tBQ3ZDO0lBRUQsTUFBTVcsZUFBZUYsT0FBT0csUUFBUSxDQUFDQyxJQUFJO0lBRXpDLE9BQU9DLHNCQUFzQkg7QUFDL0I7QUFFQSxTQUFTRyxzQkFBc0JILFlBQW9CO0lBQ2pELElBQUk7UUFDRixNQUFNSSxZQUFZSixhQUFhSyxLQUFLLENBQUM7UUFDckMsTUFBTUMsYUFBYUYsWUFBWUEsU0FBUyxDQUFDLEVBQUUsQ0FBQ0csSUFBSSxLQUFLUCxhQUFhTyxJQUFJO1FBQ3RFLE1BQU1DLFNBQVNDLEtBQUtDLEtBQUssQ0FBQ0o7UUFFMUIsT0FBTztZQUNMdkIsZUFBZXlCLE9BQU96QixhQUFhLElBQUksRUFBRTtZQUN6Q0MscUJBQ0V3QixPQUFPeEIsbUJBQW1CLElBQUlGLHNCQUFzQkUsbUJBQW1CO1lBQ3pFQyxpQkFBaUJ1QixPQUFPdkIsZUFBZSxJQUFJO1lBQzNDQyxlQUNFc0IsT0FBT3RCLGFBQWEsSUFBSUosc0JBQXNCSSxhQUFhO1lBQzdEQyxhQUFhcUIsT0FBT3JCLFdBQVcsSUFBSUwsc0JBQXNCSyxXQUFXO1FBQ3RFO0lBQ0YsRUFBRSxPQUFNO1FBQ04sT0FBT0w7SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3JpZGxpdGUvLi9zcmMvYXBwL2FwaS9zdHJhdGVneS9saWIvc3RyYXRlZ3ktYW5hbHl6ZXIudHM/ZjhkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FtcGFpZ25EYXRhIHtcbiAgY3VycmVudFByb21vczogc3RyaW5nW107XG4gIHVuaXF1ZVNlbGxpbmdQb2ludHM6IHN0cmluZ1tdO1xuICBzZWFzb25hbENvbnRleHQ6IHN0cmluZyB8IG51bGw7XG4gIGNhbGxzVG9BY3Rpb246IHN0cmluZ1tdO1xuICBrZXlQcm9kdWN0czogc3RyaW5nW107XG59XG5cbmNvbnN0IENBTVBBSUdOX0VYVFJBQ1RJT05fUFJPTVBUID0gYFxuUm9sZTogWW91IGFyZSBhbiBleHBlcnQgbWFya2V0aW5nIGFuYWx5c3QgZXh0cmFjdGluZyBjYW1wYWlnbi1yZWxldmFudCBkYXRhIGZyb20gd2Vic2l0ZSBjb250ZW50LlxuXG5UYXNrOiBBbmFseXplIHRoZSBwcm92aWRlZCB3ZWJzaXRlIHRleHQgYW5kIGV4dHJhY3QgaW5mb3JtYXRpb24gdGhhdCB3b3VsZCBiZSB1c2VmdWwgZm9yIGNyZWF0aW5nIGFuIGFkdmVydGlzaW5nIGNhbXBhaWduLlxuXG5FeHRyYWN0IHRoZSBmb2xsb3dpbmcgYW5kIHJldHVybiBPTkxZIHJhdyBKU09OOlxuXG4xLiBcImN1cnJlbnRQcm9tb3NcIjogQXJyYXkgb2YgMS0zIGFjdGl2ZSBwcm9tb3Rpb25zLCBzYWxlcywgZGlzY291bnRzLCBvciBzcGVjaWFsIG9mZmVycyBjdXJyZW50bHkgdmlzaWJsZSAoZS5nLiwgXCIyMCUgb2ZmIGZpcnN0IHNlcnZpY2VcIiwgXCJGcmVlIGVzdGltYXRlc1wiLCBcIkxpbWl0ZWQgdGltZSBvZmZlclwiKS4gSWYgbm9uZSBmb3VuZCwgcmV0dXJuIGVtcHR5IGFycmF5LlxuXG4yLiBcInVuaXF1ZVNlbGxpbmdQb2ludHNcIjogQXJyYXkgb2YgMi00IHRoaW5ncyB0aGF0IG1ha2UgdGhpcyBidXNpbmVzcyBzdGFuZCBvdXQgZnJvbSBjb21wZXRpdG9ycyAoZS5nLiwgXCIyNC83IGF2YWlsYWJpbGl0eVwiLCBcIkxpY2Vuc2VkICYgSW5zdXJlZFwiLCBcIkZhbWlseS1vd25lZCBzaW5jZSAxOTg1XCIsIFwiU2FtZS1kYXkgc2VydmljZVwiLCBcIjUtc3RhciByYXRlZFwiKS5cblxuMy4gXCJzZWFzb25hbENvbnRleHRcIjogQW55IHNlYXNvbmFsLCBob2xpZGF5LCBvciB0aW1lLXNlbnNpdGl2ZSBtZXNzYWdpbmcgKGUuZy4sIFwiU3VtbWVyIEFDIHNwZWNpYWxcIiwgXCJIb2xpZGF5IGhvdXJzXCIsIFwiQmFjayB0byBzY2hvb2wgc2FsZVwiKS4gUmV0dXJuIG51bGwgaWYgbm9uZSBmb3VuZC5cblxuNC4gXCJjYWxsc1RvQWN0aW9uXCI6IEFycmF5IG9mIDEtMyBwcmltYXJ5IGNhbGxzLXRvLWFjdGlvbiBmb3VuZCAoZS5nLiwgXCJCb29rIE5vd1wiLCBcIkdldCBhIEZyZWUgUXVvdGVcIiwgXCJDYWxsIDU1NS0xMjM0XCIsIFwiU2hvcCBOb3dcIikuXG5cbjUuIFwia2V5UHJvZHVjdHNcIjogQXJyYXkgb2YgMS01IG1haW4gcHJvZHVjdHMsIHNlcnZpY2VzLCBvciBjYXRlZ29yaWVzIG1lbnRpb25lZCAoZS5nLiwgXCJFbWVyZ2VuY3kgUGx1bWJpbmdcIiwgXCJXYXRlciBIZWF0ZXIgSW5zdGFsbGF0aW9uXCIsIFwiRHJhaW4gQ2xlYW5pbmdcIikuXG5cblJldHVybiBvbmx5IHJhdyBKU09OIGluIHRoaXMgZXhhY3QgZm9ybWF0Olxue1xuICBcImN1cnJlbnRQcm9tb3NcIjogW1wiLi4uXCJdLFxuICBcInVuaXF1ZVNlbGxpbmdQb2ludHNcIjogW1wiLi4uXCJdLFxuICBcInNlYXNvbmFsQ29udGV4dFwiOiBcIi4uLlwiIG9yIG51bGwsXG4gIFwiY2FsbHNUb0FjdGlvblwiOiBbXCIuLi5cIl0sXG4gIFwia2V5UHJvZHVjdHNcIjogW1wiLi4uXCJdXG59XG5gO1xuXG5jb25zdCBERUZBVUxUX0NBTVBBSUdOX0RBVEE6IENhbXBhaWduRGF0YSA9IHtcbiAgY3VycmVudFByb21vczogW10sXG4gIHVuaXF1ZVNlbGxpbmdQb2ludHM6IFtcIlF1YWxpdHkgc2VydmljZVwiLCBcIlByb2Zlc3Npb25hbCB0ZWFtXCJdLFxuICBzZWFzb25hbENvbnRleHQ6IG51bGwsXG4gIGNhbGxzVG9BY3Rpb246IFtcIkNvbnRhY3QgVXNcIl0sXG4gIGtleVByb2R1Y3RzOiBbXCJQcm9mZXNzaW9uYWwgc2VydmljZXNcIl0sXG59O1xuXG4vKipcbiAqIEV4dHJhY3RzIGNhbXBhaWduLXJlbGV2YW50IGRhdGEgZnJvbSB3ZWJzaXRlIHRleHQgdXNpbmcgR2VtaW5pLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdENhbXBhaWduRGF0YShcbiAgd2Vic2l0ZVRleHQ6IHN0cmluZ1xuKTogUHJvbWlzZTxDYW1wYWlnbkRhdGE+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVk7XG4gIGlmICghYXBpS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiR0VNSU5JX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldC5cIik7XG4gIH1cblxuICBjb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkoYXBpS2V5KTtcbiAgY29uc3QgbW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuICAgIG1vZGVsOiBcImdlbWluaS0yLjUtZmxhc2hcIixcbiAgfSk7XG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWwuZ2VuZXJhdGVDb250ZW50KFtcbiAgICBDQU1QQUlHTl9FWFRSQUNUSU9OX1BST01QVCxcbiAgICBgXFxuXFxuV2Vic2l0ZSBDb250ZW50OlxcbiR7d2Vic2l0ZVRleHR9YCxcbiAgXSk7XG5cbiAgY29uc3QgcmVzcG9uc2VUZXh0ID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcblxuICByZXR1cm4gcGFyc2VDYW1wYWlnblJlc3BvbnNlKHJlc3BvbnNlVGV4dCk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ2FtcGFpZ25SZXNwb25zZShyZXNwb25zZVRleHQ6IHN0cmluZyk6IENhbXBhaWduRGF0YSB7XG4gIHRyeSB7XG4gICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2VUZXh0Lm1hdGNoKC9gYGAoPzpqc29uKT9cXHMqKFtcXHNcXFNdKj8pYGBgLyk7XG4gICAgY29uc3QganNvblN0cmluZyA9IGpzb25NYXRjaCA/IGpzb25NYXRjaFsxXS50cmltKCkgOiByZXNwb25zZVRleHQudHJpbSgpO1xuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudFByb21vczogcGFyc2VkLmN1cnJlbnRQcm9tb3MgfHwgW10sXG4gICAgICB1bmlxdWVTZWxsaW5nUG9pbnRzOlxuICAgICAgICBwYXJzZWQudW5pcXVlU2VsbGluZ1BvaW50cyB8fCBERUZBVUxUX0NBTVBBSUdOX0RBVEEudW5pcXVlU2VsbGluZ1BvaW50cyxcbiAgICAgIHNlYXNvbmFsQ29udGV4dDogcGFyc2VkLnNlYXNvbmFsQ29udGV4dCB8fCBudWxsLFxuICAgICAgY2FsbHNUb0FjdGlvbjpcbiAgICAgICAgcGFyc2VkLmNhbGxzVG9BY3Rpb24gfHwgREVGQVVMVF9DQU1QQUlHTl9EQVRBLmNhbGxzVG9BY3Rpb24sXG4gICAgICBrZXlQcm9kdWN0czogcGFyc2VkLmtleVByb2R1Y3RzIHx8IERFRkFVTFRfQ0FNUEFJR05fREFUQS5rZXlQcm9kdWN0cyxcbiAgICB9O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gREVGQVVMVF9DQU1QQUlHTl9EQVRBO1xuICB9XG59XG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiQ0FNUEFJR05fRVhUUkFDVElPTl9QUk9NUFQiLCJERUZBVUxUX0NBTVBBSUdOX0RBVEEiLCJjdXJyZW50UHJvbW9zIiwidW5pcXVlU2VsbGluZ1BvaW50cyIsInNlYXNvbmFsQ29udGV4dCIsImNhbGxzVG9BY3Rpb24iLCJrZXlQcm9kdWN0cyIsImV4dHJhY3RDYW1wYWlnbkRhdGEiLCJ3ZWJzaXRlVGV4dCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIkVycm9yIiwiZ2VuQUkiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsInJlc3VsdCIsImdlbmVyYXRlQ29udGVudCIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlIiwidGV4dCIsInBhcnNlQ2FtcGFpZ25SZXNwb25zZSIsImpzb25NYXRjaCIsIm1hdGNoIiwianNvblN0cmluZyIsInRyaW0iLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/strategy/lib/strategy-analyzer.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/strategy/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/strategy/route.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _scan_lib_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scan/lib/browser */ \"(rsc)/./src/app/api/scan/lib/browser.ts\");\n/* harmony import */ var _scan_lib_text_extractor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scan/lib/text-extractor */ \"(rsc)/./src/app/api/scan/lib/text-extractor.ts\");\n/* harmony import */ var _scan_lib_url_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scan/lib/url-utils */ \"(rsc)/./src/app/api/scan/lib/url-utils.ts\");\n/* harmony import */ var _lib_strategy_analyzer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/strategy-analyzer */ \"(rsc)/./src/app/api/strategy/lib/strategy-analyzer.ts\");\n/* harmony import */ var _lib_strategist__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/strategist */ \"(rsc)/./src/app/api/strategy/lib/strategist.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_scan_lib_browser__WEBPACK_IMPORTED_MODULE_1__]);\n_scan_lib_browser__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n// Force Node.js runtime (Playwright doesn't work in Edge runtime)\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nasync function POST(request) {\n    const encoder = new TextEncoder();\n    try {\n        const body = await request.json();\n        if (!body.brandProfile) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"brandProfile is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Handle chat mode (simple response, no streaming needed)\n        if (body.mode === \"chat\" && body.userMessage && body.currentStrategy) {\n            const response = await (0,_lib_strategist__WEBPACK_IMPORTED_MODULE_5__.generateChatResponse)(body.brandProfile, body.currentStrategy, body.userMessage, body.conversationHistory || []);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                type: \"chat\",\n                message: response.message,\n                updatedStrategy: response.updatedStrategy\n            });\n        }\n        // Initial strategy generation (streaming)\n        const stream = new ReadableStream({\n            async start (controller) {\n                let browser = null;\n                const sendStatus = (step)=>{\n                    const message = JSON.stringify({\n                        type: \"status\",\n                        step\n                    }) + \"\\n\";\n                    controller.enqueue(encoder.encode(message));\n                };\n                const sendError = (message)=>{\n                    const errorMsg = JSON.stringify({\n                        type: \"error\",\n                        message\n                    }) + \"\\n\";\n                    controller.enqueue(encoder.encode(errorMsg));\n                };\n                try {\n                    let websiteText = body.rawWebsiteText;\n                    let campaignData;\n                    // If no raw text provided, do text-only rescan\n                    if (!websiteText && body.websiteUrl) {\n                        sendStatus(\"scanning_website\");\n                        const normalizedUrl = (0,_scan_lib_url_utils__WEBPACK_IMPORTED_MODULE_3__.parseUrl)(body.websiteUrl);\n                        if (!normalizedUrl) {\n                            sendError(\"Invalid website URL\");\n                            controller.close();\n                            return;\n                        }\n                        const session = await (0,_scan_lib_browser__WEBPACK_IMPORTED_MODULE_1__.createBrowserSession)(normalizedUrl);\n                        browser = session.browser;\n                        websiteText = await (0,_scan_lib_text_extractor__WEBPACK_IMPORTED_MODULE_2__.extractWebsiteText)(session.page);\n                        await (0,_scan_lib_browser__WEBPACK_IMPORTED_MODULE_1__.closeBrowser)(browser);\n                        browser = null;\n                    }\n                    // If we still have no text, use brand info as fallback\n                    if (!websiteText) {\n                        websiteText = `${body.brandProfile.name}. ${body.brandProfile.brandSummary || \"\"} ${body.brandProfile.tagline || \"\"}`;\n                    }\n                    // Extract campaign data from website text\n                    sendStatus(\"analyzing_content\");\n                    campaignData = await (0,_lib_strategy_analyzer__WEBPACK_IMPORTED_MODULE_4__.extractCampaignData)(websiteText);\n                    // Generate strategy with Strategist persona\n                    sendStatus(\"generating_strategy\");\n                    const result = await (0,_lib_strategist__WEBPACK_IMPORTED_MODULE_5__.generateInitialStrategy)(body.brandProfile, campaignData);\n                    // Send final result\n                    const completeMessage = JSON.stringify({\n                        type: \"complete\",\n                        data: {\n                            greeting: result.greeting,\n                            strategy: result.strategy,\n                            campaignData\n                        }\n                    }) + \"\\n\";\n                    controller.enqueue(encoder.encode(completeMessage));\n                    controller.close();\n                } catch (error) {\n                    await (0,_scan_lib_browser__WEBPACK_IMPORTED_MODULE_1__.closeBrowser)(browser);\n                    sendError(error instanceof Error ? error.message : \"Unknown error occurred\");\n                    controller.close();\n                }\n            }\n        });\n        return new Response(stream, {\n            headers: {\n                \"Content-Type\": \"text/plain; charset=utf-8\",\n                \"Transfer-Encoding\": \"chunked\"\n            }\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Failed to process request\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JBQ3BCLE1BQU1VLGtCQUNKbEIsS0FBS0MsU0FBUyxDQUFDO3dCQUNiWCxNQUFNO3dCQUNONkIsTUFBTTs0QkFDSkMsVUFBVUgsT0FBT0csUUFBUTs0QkFDekJDLFVBQVVKLE9BQU9JLFFBQVE7NEJBQ3pCYjt3QkFDRjtvQkFDRixLQUFLO29CQUNQWixXQUFXTSxPQUFPLENBQUN4QixRQUFReUIsTUFBTSxDQUFDZTtvQkFDbEN0QixXQUFXZSxLQUFLO2dCQUNsQixFQUFFLE9BQU81QixPQUFPO29CQUNkLE1BQU1mLCtEQUFZQSxDQUFDNkI7b0JBQ25CTyxVQUNFckIsaUJBQWlCdUMsUUFBUXZDLE1BQU1RLE9BQU8sR0FBRztvQkFFM0NLLFdBQVdlLEtBQUs7Z0JBQ2xCO1lBQ0Y7UUFDRjtRQUVBLE9BQU8sSUFBSVksU0FBUzlCLFFBQVE7WUFDMUIrQixTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIscUJBQXFCO1lBQ3ZCO1FBQ0Y7SUFDRixFQUFFLE9BQU96QyxPQUFPO1FBQ2QsT0FBT2pCLHFEQUFZQSxDQUFDZSxJQUFJLENBQ3RCO1lBQ0VFLE9BQ0VBLGlCQUFpQnVDLFFBQVF2QyxNQUFNUSxPQUFPLEdBQUc7UUFDN0MsR0FDQTtZQUFFUCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dyaWRsaXRlLy4vc3JjL2FwcC9hcGkvc3RyYXRlZ3kvcm91dGUudHM/ZWJiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBjcmVhdGVCcm93c2VyU2Vzc2lvbiwgY2xvc2VCcm93c2VyIH0gZnJvbSBcIi4uL3NjYW4vbGliL2Jyb3dzZXJcIjtcbmltcG9ydCB7IGV4dHJhY3RXZWJzaXRlVGV4dCB9IGZyb20gXCIuLi9zY2FuL2xpYi90ZXh0LWV4dHJhY3RvclwiO1xuaW1wb3J0IHsgcGFyc2VVcmwgfSBmcm9tIFwiLi4vc2Nhbi9saWIvdXJsLXV0aWxzXCI7XG5pbXBvcnQgeyBleHRyYWN0Q2FtcGFpZ25EYXRhLCBDYW1wYWlnbkRhdGEgfSBmcm9tIFwiLi9saWIvc3RyYXRlZ3ktYW5hbHl6ZXJcIjtcbmltcG9ydCB7XG4gIGdlbmVyYXRlSW5pdGlhbFN0cmF0ZWd5LFxuICBnZW5lcmF0ZUNoYXRSZXNwb25zZSxcbiAgQnJhbmRQcm9maWxlSW5wdXQsXG4gIFN0cmF0ZWd5RG9jdW1lbnQsXG59IGZyb20gXCIuL2xpYi9zdHJhdGVnaXN0XCI7XG5cbi8vIEZvcmNlIE5vZGUuanMgcnVudGltZSAoUGxheXdyaWdodCBkb2Vzbid0IHdvcmsgaW4gRWRnZSBydW50aW1lKVxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIjtcblxuaW50ZXJmYWNlIFN0cmF0ZWd5UmVxdWVzdCB7XG4gIC8vIEJyYW5kIHByb2ZpbGUgKHJlcXVpcmVkKVxuICBicmFuZFByb2ZpbGU6IEJyYW5kUHJvZmlsZUlucHV0O1xuXG4gIC8vIE9wdGlvbiBBOiBQYXNzIHJhdyB3ZWJzaXRlIHRleHQgZnJvbSBQaGFzZSAxIChTY2FuIOKGkiBTdHJhdGVneSBmbG93KVxuICByYXdXZWJzaXRlVGV4dD86IHN0cmluZztcblxuICAvLyBPcHRpb24gQjogVVJMIGZvciB0ZXh0LW9ubHkgcmVzY2FuIChEYXNoYm9hcmQg4oaSIFN0cmF0ZWd5IGZsb3cpXG4gIHdlYnNpdGVVcmw/OiBzdHJpbmc7XG5cbiAgLy8gRm9yIGNoYXQgY29udGludWF0aW9uXG4gIG1vZGU/OiBcImluaXRpYWxcIiB8IFwiY2hhdFwiO1xuICB1c2VyTWVzc2FnZT86IHN0cmluZztcbiAgY3VycmVudFN0cmF0ZWd5PzogU3RyYXRlZ3lEb2N1bWVudDtcbiAgY29udmVyc2F0aW9uSGlzdG9yeT86IHsgcm9sZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiOyBjb250ZW50OiBzdHJpbmcgfVtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5OiBTdHJhdGVneVJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghYm9keS5icmFuZFByb2ZpbGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJicmFuZFByb2ZpbGUgaXMgcmVxdWlyZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoYXQgbW9kZSAoc2ltcGxlIHJlc3BvbnNlLCBubyBzdHJlYW1pbmcgbmVlZGVkKVxuICAgIGlmIChib2R5Lm1vZGUgPT09IFwiY2hhdFwiICYmIGJvZHkudXNlck1lc3NhZ2UgJiYgYm9keS5jdXJyZW50U3RyYXRlZ3kpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2VuZXJhdGVDaGF0UmVzcG9uc2UoXG4gICAgICAgIGJvZHkuYnJhbmRQcm9maWxlLFxuICAgICAgICBib2R5LmN1cnJlbnRTdHJhdGVneSxcbiAgICAgICAgYm9keS51c2VyTWVzc2FnZSxcbiAgICAgICAgYm9keS5jb252ZXJzYXRpb25IaXN0b3J5IHx8IFtdXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICB0eXBlOiBcImNoYXRcIixcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSxcbiAgICAgICAgdXBkYXRlZFN0cmF0ZWd5OiByZXNwb25zZS51cGRhdGVkU3RyYXRlZ3ksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsIHN0cmF0ZWd5IGdlbmVyYXRpb24gKHN0cmVhbWluZylcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgYXN5bmMgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICBsZXQgYnJvd3NlciA9IG51bGw7XG5cbiAgICAgICAgY29uc3Qgc2VuZFN0YXR1cyA9IChzdGVwOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcInN0YXR1c1wiLCBzdGVwIH0pICsgXCJcXG5cIjtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUobWVzc2FnZSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHNlbmRFcnJvciA9IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJlcnJvclwiLCBtZXNzYWdlIH0pICsgXCJcXG5cIjtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoZXJyb3JNc2cpKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGxldCB3ZWJzaXRlVGV4dCA9IGJvZHkucmF3V2Vic2l0ZVRleHQ7XG4gICAgICAgICAgbGV0IGNhbXBhaWduRGF0YTogQ2FtcGFpZ25EYXRhO1xuXG4gICAgICAgICAgLy8gSWYgbm8gcmF3IHRleHQgcHJvdmlkZWQsIGRvIHRleHQtb25seSByZXNjYW5cbiAgICAgICAgICBpZiAoIXdlYnNpdGVUZXh0ICYmIGJvZHkud2Vic2l0ZVVybCkge1xuICAgICAgICAgICAgc2VuZFN0YXR1cyhcInNjYW5uaW5nX3dlYnNpdGVcIik7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkVXJsID0gcGFyc2VVcmwoYm9keS53ZWJzaXRlVXJsKTtcblxuICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkVXJsKSB7XG4gICAgICAgICAgICAgIHNlbmRFcnJvcihcIkludmFsaWQgd2Vic2l0ZSBVUkxcIik7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3JlYXRlQnJvd3NlclNlc3Npb24obm9ybWFsaXplZFVybCk7XG4gICAgICAgICAgICBicm93c2VyID0gc2Vzc2lvbi5icm93c2VyO1xuICAgICAgICAgICAgd2Vic2l0ZVRleHQgPSBhd2FpdCBleHRyYWN0V2Vic2l0ZVRleHQoc2Vzc2lvbi5wYWdlKTtcbiAgICAgICAgICAgIGF3YWl0IGNsb3NlQnJvd3Nlcihicm93c2VyKTtcbiAgICAgICAgICAgIGJyb3dzZXIgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHdlIHN0aWxsIGhhdmUgbm8gdGV4dCwgdXNlIGJyYW5kIGluZm8gYXMgZmFsbGJhY2tcbiAgICAgICAgICBpZiAoIXdlYnNpdGVUZXh0KSB7XG4gICAgICAgICAgICB3ZWJzaXRlVGV4dCA9IGAke2JvZHkuYnJhbmRQcm9maWxlLm5hbWV9LiAke1xuICAgICAgICAgICAgICBib2R5LmJyYW5kUHJvZmlsZS5icmFuZFN1bW1hcnkgfHwgXCJcIlxuICAgICAgICAgICAgfSAke2JvZHkuYnJhbmRQcm9maWxlLnRhZ2xpbmUgfHwgXCJcIn1gO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEV4dHJhY3QgY2FtcGFpZ24gZGF0YSBmcm9tIHdlYnNpdGUgdGV4dFxuICAgICAgICAgIHNlbmRTdGF0dXMoXCJhbmFseXppbmdfY29udGVudFwiKTtcbiAgICAgICAgICBjYW1wYWlnbkRhdGEgPSBhd2FpdCBleHRyYWN0Q2FtcGFpZ25EYXRhKHdlYnNpdGVUZXh0KTtcblxuICAgICAgICAgIC8vIEdlbmVyYXRlIHN0cmF0ZWd5IHdpdGggU3RyYXRlZ2lzdCBwZXJzb25hXG4gICAgICAgICAgc2VuZFN0YXR1cyhcImdlbmVyYXRpbmdfc3RyYXRlZ3lcIik7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VuZXJhdGVJbml0aWFsU3RyYXRlZ3koXG4gICAgICAgICAgICBib2R5LmJyYW5kUHJvZmlsZSxcbiAgICAgICAgICAgIGNhbXBhaWduRGF0YVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBTZW5kIGZpbmFsIHJlc3VsdFxuICAgICAgICAgIGNvbnN0IGNvbXBsZXRlTWVzc2FnZSA9XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY29tcGxldGVcIixcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGdyZWV0aW5nOiByZXN1bHQuZ3JlZXRpbmcsXG4gICAgICAgICAgICAgICAgc3RyYXRlZ3k6IHJlc3VsdC5zdHJhdGVneSxcbiAgICAgICAgICAgICAgICBjYW1wYWlnbkRhdGEsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSArIFwiXFxuXCI7XG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKGNvbXBsZXRlTWVzc2FnZSkpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBhd2FpdCBjbG9zZUJyb3dzZXIoYnJvd3Nlcik7XG4gICAgICAgICAgc2VuZEVycm9yKFxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShzdHJlYW0sIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgIFwiVHJhbnNmZXItRW5jb2RpbmdcIjogXCJjaHVua2VkXCIsXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6XG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBwcm9jZXNzIHJlcXVlc3RcIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQnJvd3NlclNlc3Npb24iLCJjbG9zZUJyb3dzZXIiLCJleHRyYWN0V2Vic2l0ZVRleHQiLCJwYXJzZVVybCIsImV4dHJhY3RDYW1wYWlnbkRhdGEiLCJnZW5lcmF0ZUluaXRpYWxTdHJhdGVneSIsImdlbmVyYXRlQ2hhdFJlc3BvbnNlIiwicnVudGltZSIsImR5bmFtaWMiLCJQT1NUIiwicmVxdWVzdCIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImJvZHkiLCJqc29uIiwiYnJhbmRQcm9maWxlIiwiZXJyb3IiLCJzdGF0dXMiLCJtb2RlIiwidXNlck1lc3NhZ2UiLCJjdXJyZW50U3RyYXRlZ3kiLCJyZXNwb25zZSIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJ0eXBlIiwibWVzc2FnZSIsInVwZGF0ZWRTdHJhdGVneSIsInN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwiYnJvd3NlciIsInNlbmRTdGF0dXMiLCJzdGVwIiwiSlNPTiIsInN0cmluZ2lmeSIsImVucXVldWUiLCJlbmNvZGUiLCJzZW5kRXJyb3IiLCJlcnJvck1zZyIsIndlYnNpdGVUZXh0IiwicmF3V2Vic2l0ZVRleHQiLCJjYW1wYWlnbkRhdGEiLCJ3ZWJzaXRlVXJsIiwibm9ybWFsaXplZFVybCIsImNsb3NlIiwic2Vzc2lvbiIsInBhZ2UiLCJuYW1lIiwiYnJhbmRTdW1tYXJ5IiwidGFnbGluZSIsInJlc3VsdCIsImNvbXBsZXRlTWVzc2FnZSIsImRhdGEiLCJncmVldGluZyIsInN0cmF0ZWd5IiwiRXJyb3IiLCJSZXNwb25zZSIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/strategy/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@ghostery","vendor-chunks/@remusao","vendor-chunks/tldts-core","vendor-chunks/tldts-experimental","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstrategy%2Froute&page=%2Fapi%2Fstrategy%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstrategy%2Froute.ts&appDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpiotrostiak%2FDev%2Fai%2Fgrid-lite&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();